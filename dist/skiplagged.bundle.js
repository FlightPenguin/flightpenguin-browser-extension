(()=>{"use strict";function t(){chrome.runtime.sendMessage({event:"FOCUS_WEBPAGE"})}function r(t,r){chrome.runtime.sendMessage({event:"FAILED_SCRAPER",source:t,description:"".concat(r.name," ").concat(r.message)})}function e(t){chrome.runtime.sendMessage({event:"NO_FLIGHTS_FOUND",provider:t})}function n(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,i=[],a=!0,u=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(i.push(n.value),!r||i.length!==r);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==e.return||e.return()}finally{if(u)throw o}}return i}}(t,r)||o(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,r){if(t){if("string"==typeof t)return i(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,r):void 0}}function i(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var a=/\.(?:(?:[\x2D0-9A-Z_a-z\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])|\\(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))+/,u=/#(?:(?:[\x2D0-9A-Z_a-z\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])|\\(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))+/,c=/\[[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*((?:(?:\*|[\x2D0-9A-Z_a-z]*)\|)?(?:(?:[\x2D0-9A-Z_a-z\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+))/g,l={};function f(t){var r=l[t];if(r)return r;r=l[t]={attributes:!0,subtree:!0,childList:!0};var e,i=[],f=function(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=o(t))){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return u=t.done,t},e:function(t){c=!0,a=t},f:function(){try{u||null==e.return||e.return()}finally{if(c)throw a}}}}(t.matchAll(c));try{for(f.s();!(e=f.n()).done;){var s=n(e.value,2)[1];if(s.startsWith("*")||s.startsWith("|"))return r;i.push(s.replace("|",":"))}}catch(t){f.e(t)}finally{f.f()}return a.test(t)&&i.push("class"),u.test(t)&&i.push("id"),0===i.length?r.attributes=!1:r.attributeFilter=i,r}function s(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=r.timeout,n=void 0===e?2500:e,o=r.scope,i=void 0===o?document:o;return new Promise((function(r){var e=i.querySelector(t);if(null===e){var o=null,a=new MutationObserver((function(){var e=i.querySelector(t);null!==e&&(clearTimeout(o),a.disconnect(),r(e))}));a.observe(i,f(t)),o=setTimeout((function(){a.disconnect(),r(null)}),n)}else r(e)}))}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function y(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&w(t,r)}function h(t){var r=A();return function(){var e,n=F(t);if(r){var o=F(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return v(this,e)}}function v(t,r){return!r||"object"!==p(r)&&"function"!=typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function m(t){var r="function"==typeof Map?new Map:void 0;return(m=function(t){if(null===t||(e=t,-1===Function.toString.call(e).indexOf("[native code]")))return t;var e;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,n)}function n(){return b(t,arguments,F(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),w(n,t)})(t)}function b(t,r,e){return(b=A()?Reflect.construct:function(t,r,e){var n=[null];n.push.apply(n,r);var o=new(Function.bind.apply(t,n));return e&&w(o,e.prototype),o}).apply(null,arguments)}function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function w(t,r){return(w=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){y(e,t);var r=h(e);function e(t){return d(this,e),r.call(this,t)}return e}(function(t){y(e,t);var r=h(e);function e(t){var n;return d(this,e),(n=r.call(this)).message=t,n.stack=(new Error).stack,n.name=n.constructor.name,n}return e}(m(Error))),S=function(t){y(e,t);var r=h(e);function e(t){return d(this,e),r.call(this,t)}return e}(g),D=function(t){y(e,t);var r=h(e);function e(t){return d(this,e),r.call(this,t)}return e}(g),C=function(t){y(e,t);var r=h(e);function e(t){return d(this,e),r.call(this,t)}return e}(g);function E(t,r,e,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?r(c):Promise.resolve(c).then(n,o)}function x(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){E(i,n,o,a,u,"next",t)}function u(t){E(i,n,o,a,u,"throw",t)}a(void 0)}))}}var O=function(){var t=x((function*(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,r=arguments.length>1?arguments[1]:void 0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.document,n=e.querySelector(r);if(!n&&!(n=yield s(r,{timeout:t,scope:e})))throw new S("Render of ".concat(r," failed to complete in ").concat(t));return n}));return function(){return t.apply(this,arguments)}}(),I=function(){var t=document.querySelector("input[data-name='hiddenCity']");t&&t.click()},j=function(t){var r=window.pageYOffset+t.getBoundingClientRect().top-window.innerHeight/2;window.scroll(0,r)};function B(t,r){chrome.runtime.sendMessage({event:"FLIGHT_RESULTS_RECEIVED",flights:r,provider:t})}function T(t,r){chrome.runtime.sendMessage({event:"RETURN_FLIGHTS_RECEIVED",flights:r,provider:t})}var R=function(t){var r,e=t.querySelector("span.airlines");if(!e)throw new C("Unable to find airline tooltip container");var n=null===(r=e.dataset)||void 0===r?void 0:r.originalTitle;if(!n)throw new D("Unable to find original title of tooltip");var o=(new DOMParser).parseFromString(n,"text/html").querySelectorAll("span");if(!o)throw new D("Unable to find span in tooltip");return Array.from(o).map((function(t){return t.textContent||""}))};const P={airlineDetailsMap:{"American Airlines":{display:"American",color:"#C5423E",code:"AA"},American:{display:"American",color:"#C5423E",code:"AA"},Delta:{display:"Delta",color:"#EE722E",code:"DL"},Southwest:{display:"Southwest",color:"#F6C04D",code:"WN"},United:{display:"United",color:"#235EA6",code:"UA"},"Air Canada":{display:"Air Canada",color:"#E53222",code:"AC"},"Alaska Airlines":{display:"Alaska",color:"#51172C",code:"AS"},jetBlue:{display:"jetBlue",color:"#5F90C8",code:"B6"},"JetBlue Airways":{display:"jetBlue",color:"#5F90C8",code:"B6"},"Spirit Airlines":{display:"Spirit",color:"#BBB140",code:"NK"},WestJet:{display:"WestJet",color:"#4BA89C",code:"WS"},Aeromexico:{display:"Aeromexico",color:"#000000",code:"AM"},"Frontier Airlines":{display:"Frontier",color:"#378055",code:"F9"},Interjet:{display:"Interjet",color:"#A8A8A8",code:"4O"},"Hawaiian Airlines":{display:"Hawaiian",color:"#4D388A",code:"HA"},"Sun Country Airlines":{display:"Sun Country",color:"#D79A71",code:"SY"},"Porter Airlines":{display:"Porter",color:"#0F2B53",code:"PD"},"China Southern Airlines":{display:"China Southern",color:"#93ACCA",code:"CZ"},Lufthansa:{display:"Lufthansa",color:"#EFB95D",code:"LH"},SWISS:{display:"Swiss",color:"#D42D21",code:"LX"},"China Eastern Airlines":{display:"China Eastern",color:"#A9545F",code:"MU"},"British Airways":{display:"British",color:"#EA8E8C",code:"BA"},Iberia:{display:"Iberia",color:"#D05653",code:"IB"},"Air China":{display:"Air China",color:"#DF524B",code:"CA"},"Emirates Airlines":{display:"Emirates",color:"#CF534F",code:"EK"},"KLM-Royal Dutch Airlines":{display:"KLM",color:"#44A0DC",code:"KL"},"Air France":{display:"Air France",color:"#DB3832",code:"AF"},"Turkish Airlines":{display:"Turkish",color:"#DB3832",code:"TK"},"Cathay Pacific":{display:"Cathay",color:"#2A645A",code:"CX"},"Cathay Dragon":{display:"Cathay",color:"#2A645A",code:"CX"},"EVA Airways":{display:"EVA",color:"#6F9F64",code:"BR"},"China Airlines":{display:"China Airlines",color:"#DAABB1",code:"CI"},"ANA Airlines":{display:"ANA",color:"#254897",code:"NH"},"Japan Airlines":{display:"Japan Airlines",color:"#E56E69",code:"JL"},"Air India":{display:"Air India",color:"#D47346",code:"AI"},"Qantas Airways":{display:"Qantas",color:"#E34538",code:"QF"},"Singapore Airlines":{display:"Sinagpore",color:"#EFA952",code:"SQ"},"ANA (All Nippon Airways)":{display:"ANA",color:"#0f4a8d"},"Multiple airlines":{display:"Multiple",color:"#000000"}},getAirlineName:function(t){if(t&&"string"==typeof t){var r=t.trim(),e=this.airlineDetailsMap[r];return e&&(r=e.display),r}},getAirlineDetails:function(t){var r=t.trim();return this.airlineDetailsMap[r]||{display:r,color:"#DFCCFB"}}};function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,r){_=function(t,r){return new i(t,void 0,r)};var e=M(RegExp),n=RegExp.prototype,o=new WeakMap;function i(t,r,n){var i=e.call(this,t,r);return o.set(i,n||o.get(t)),i}function a(t,r){var e=o.get(r);return Object.keys(e).reduce((function(r,n){return r[n]=t[e[n]],r}),Object.create(null))}return k(i,e),i.prototype.exec=function(t){var r=n.exec.call(this,t);return r&&(r.groups=a(r,this)),r},i.prototype[Symbol.replace]=function(t,r){if("string"==typeof r){var e=o.get(this);return n[Symbol.replace].call(this,t,r.replace(/\$<([^>]+)>/g,(function(t,r){return"$"+e[r]})))}if("function"==typeof r){var i=this;return n[Symbol.replace].call(this,t,(function(){var t=[];return t.push.apply(t,arguments),"object"!==U(t[t.length-1])&&t.push(a(t,i)),r.apply(this,t)}))}return n[Symbol.replace].call(this,t,r)},_.apply(this,arguments)}function k(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&N(t,r)}function M(t){var r="function"==typeof Map?new Map:void 0;return(M=function(t){if(null===t||(e=t,-1===Function.toString.call(e).indexOf("[native code]")))return t;var e;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,n)}function n(){return L(t,arguments,H(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),N(n,t)})(t)}function L(t,r,e){return(L=q()?Reflect.construct:function(t,r,e){var n=[null];n.push.apply(n,r);var o=new(Function.bind.apply(t,n));return e&&N(o,e.prototype),o}).apply(null,arguments)}function q(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function N(t,r){return(N=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var G=_(/^([ A-Za-z]*)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*([Ff]light)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*([0-9]*)$/,{Airline:1,Flight:2,Number:3}),W=function(t){var r,e,n,o=null===(r=t.match(G))||void 0===r||null===(e=r.groups)||void 0===e||null===(n=e.Airline)||void 0===n?void 0:n.trim();if(!o)throw new g("Unable to extract airline name from ".concat(t));var i=P.getAirlineName(o);if(!i)throw new g("Unable to extract airline name from airline map");return i};function $(t,r){var e;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=function(t,r){if(!t)return;if("string"==typeof t)return z(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return z(t,r)}(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==e.return||e.return()}finally{if(u)throw i}}}}function z(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var J=function(t){var r=t.querySelector("div[class='trip-path-point-time ']");if(!r)throw new C("Unable to determine waypoint time");var e=r.textContent;if(!e)throw new D("Unable to extract time");return function(t){return t.toLowerCase().replace(" ","").trim()}(e)},K=function(t){var r=t.querySelector("div[class='airport-code']");if(!r)throw new C("Unable to determine waypoint airport");var e=r.textContent;if(!e)throw new D("Unable to extract airport code");return e},Z=function(t){var r=t.querySelector("trip-path-spacer-label");if(!r)throw new C("Unable to determine spacer duration");var e=r.textContent;if(!e)throw new D("Unable to extract duration");return e};function V(t){return function(t){if(Array.isArray(t))return Y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Q(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(t,r){if(t){if("string"==typeof t)return Y(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Y(t,r):void 0}}function Y(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function X(t,r,e,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?r(c):Promise.resolve(c).then(n,o)}var tt=/\d{1,2} stops?/i,rt=function(){var t,r=(t=function*(t){yield O(3e3,"section #trip-list-wrapper"),yield O(1e4,"[data-sort='cost']");var r=nt(t),e=et(t),n=e.duration,o=e.hasStops,i=function(t){var r=t.querySelector("div.trip-path");if(!r)throw new C("Unable to lookup trip container");var e=r.querySelectorAll(".trip-path-point, .trip-path-spacer");if(!e)throw new C("Unable to lookup trip components");var n,o=R(t),i=[],a={},u=!1,c=$(e);try{for(c.s();!(n=c.n()).done;){var l=n.value;if(u)u=!1;else switch(l.getAttribute("class")){case"trip-path-point":a.from?(a.to=K(l),a.toTime=J(l),i.push(a),a={},u=!0):(a.from=K(l),a.fromTime=J(l));break;case"trip-path-spacer":a.duration=Z(l),a.operatingAirline=W(o[i.length]);break;default:throw new g("Unknown case option")}}}catch(t){c.e(t)}finally{c.f()}if(!i)throw new g("Unable to identify layovers");return i}(t),a=i[0].fromTime,u=i.slice(-1)[0].toTime;return o||(i=[]),{marketingAirline:r,operatingAirline:null,layovers:i,duration:n,fromTime:a,toTime:u}},function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){X(i,n,o,a,u,"next",t)}function u(t){X(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t){return r.apply(this,arguments)}}(),et=function(t){var r,e,n=t.querySelector("span.trip-path-duration");if(!n)throw new C("Unable to lookup flight duration time");var o=null===(r=n.textContent)||void 0===r?void 0:r.split("|")[0].trim(),i=tt.test((null===(e=n.textContent)||void 0===e?void 0:e.split("|")[1].trim())||"");if(!o)throw new D("Unable to determine duration time for flight");return{duration:o,hasStops:i}},nt=function(t){var r,e=new Set,n=function(t,r){var e;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=Q(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==e.return||e.return()}finally{if(u)throw i}}}}(R(t));try{for(n.s();!(r=n.n()).done;){var o=r.value,i=W(o);e.add(i)}}catch(t){n.e(t)}finally{n.f()}return 1===e.size?V(e)[0]:"Multiple airlines"};function ot(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var e=[],n=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(e.push(a.value),!r||e.length!==r);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return e}(t,r)||at(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(t,r){var e;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=at(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==e.return||e.return()}finally{if(u)throw i}}}}function at(t,r){if(t){if("string"==typeof t)return ut(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?ut(t,r):void 0}}function ut(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function ct(t,r,e,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?r(c):Promise.resolve(c).then(n,o)}var lt=function(){var t,r=(t=function*(t,r){var e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=[],i=[],a=it(t);try{for(a.s();!(e=a.n()).done;){var u=e.value;if(!ft(u,r)){var c=yield rt(u),l=n?[n,c]:[c,null],f=ot(l,2),s=f[0],p=f[1],d=pt(u);u.dataset.fpid=st(c),u.dataset.visited="true",o.push({departureFlight:s,returnFlight:p,fare:d}),i.push(u.id),n?B("skiplagged",o):T("skiplagged",o)}}}catch(t){a.e(t)}finally{a.f()}return i},function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){ct(i,n,o,a,u,"next",t)}function u(t){ct(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t,e){return r.apply(this,arguments)}}(),ft=function(t,r){return["bargain fare","special fare","after booking"].some((function(r){var e;return null===(e=t.textContent)||void 0===e?void 0:e.includes(r)}))||r.includes(t.id)},st=function(t){return[t.fromTime,t.toTime,t.marketingAirline].join("-")},pt=function(t){var r=t.querySelector("div.trip-cost");if(!r)throw new C("Unable to find fare wrapper");var e=r.querySelector("p");if(!e)throw new C("Unable to find fare container");return e.textContent};function dt(t){return function(t){if(Array.isArray(t))return yt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return yt(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return yt(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function ht(t,r,e,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?r(c):Promise.resolve(c).then(n,o)}var vt="section #trip-list-wrapper",mt="[data-sort='cost']",bt="div[class='trip']:not([data-visited='true'])",At=function(){var t,r=(t=function*(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;yield O(3e3,vt),yield O(1e4,mt),I(),wt()&&e("skiplagged");for(var r=[],n=!0;n;){var o=document.querySelectorAll(bt),i=yield lt(Array.from(o),r,t);r.push.apply(r,dt(i)),j(Array.from(o).slice(-1)[0]);try{yield O(3e3,bt)}catch(t){n=!1}}},function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){ht(i,n,o,a,u,"next",t)}function u(t){ht(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(){return r.apply(this,arguments)}}(),wt=function(){return!!document.querySelector(".trip-list-empty")};function Ft(t){return function(t){if(Array.isArray(t))return gt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return gt(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return gt(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function St(t,r,e,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?r(c):Promise.resolve(c).then(n,o)}var Dt=function(){var t,r=(t=function*(t,r){Ct();var e,n=Et(r||t);(e=n).style.border="10px solid #f2554b",e.style.borderRadius="6px",e.style.paddingTop="25px",e.style.paddingBottom="25px",e.dataset.selected="true",xt(n)},function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){St(i,n,o,a,u,"next",t)}function u(t){St(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t,e){return r.apply(this,arguments)}}(),Ct=function(){var t,r=document.querySelector("[data-selected='true']");r&&((t=r).dataset.selected="false",t.style.border="",t.style.paddingTop="0px",t.style.paddingBottom="0px",t.style.borderRadius="0px")},Et=function(t){var r=document.querySelectorAll("div[class='trip']");if(!r)throw new g("Unable to find flights in highlighting");var e,n,o=(e=Ft(r),n=t,e.find((function(t){return t.dataset.fpid===n})));if(!o)throw new C("Unable to find flight to highlight");return o},xt=function(t){var r=window.pageYOffset+t.getBoundingClientRect().top-window.innerHeight/2;window.scroll(0,r)};function Ot(t,r,e,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?r(c):Promise.resolve(c).then(n,o)}var It=function(){var t,r=(t=function*(t){},function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){Ot(i,n,o,a,u,"next",t)}function u(t){Ot(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t){return r.apply(this,arguments)}}();function jt(t,r,e,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?r(c):Promise.resolve(c).then(n,o)}function Bt(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){jt(i,n,o,a,u,"next",t)}function u(t){jt(i,n,o,a,u,"throw",t)}a(void 0)}))}}window.Sentry.init({dsn:"https://d7f3363dd3774a64ad700b4523bcb789@o407795.ingest.sentry.io/5277451"}),chrome.runtime.onMessage.addListener(function(){var r=Bt((function*(r){switch(r.event){case"BEGIN_PARSING":yield Tt();break;case"GET_RETURN_FLIGHTS":yield Rt(r.departure);break;case"HIGHLIGHT_FLIGHT":yield Dt(r.selectedDepartureId,r.selectedReturnId),function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#back-to-search";if(!document.querySelector(r)){var e=document.createElement("button");e.id="back-to-search",e.textContent="Return to FlightPenguin",e.title="Click to return to FlightPenguin and keep browsing.",e.addEventListener("click",t),document.body.append(e)}}();break;case"CLEAR_SELECTION":chrome.runtime.sendMessage({event:"PROVIDER_READY",provider:"skiplagged"})}}));return function(t){return r.apply(this,arguments)}}());var Tt=function(){var t=Bt((function*(){try{yield At(null)}catch(t){window.Sentry.captureException(t),r("skiplagged",t)}}));return function(){return t.apply(this,arguments)}}(),Rt=function(){var t=Bt((function*(t){yield It(t);try{yield At(t)}catch(t){window.Sentry.captureException(t),r("skiplagged",t)}}));return function(r){return t.apply(this,arguments)}}()})();