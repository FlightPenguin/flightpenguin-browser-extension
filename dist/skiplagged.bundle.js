(()=>{var t={1633:(t,e,r)=>{var n="[object Symbol]",o="\\u0300-\\u036f\\ufe20-\\ufe23",i="[\\ud800-\\udfff]",a="["+o+"\\u20d0-\\u20f0]",u="\\ud83c[\\udffb-\\udfff]",l="[^\\ud800-\\udfff]",c="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+a+"|"+u+")"+"?",d="[\\ufe0e\\ufe0f]?",p=d+s+("(?:\\u200d(?:"+[l,c,f].join("|")+")"+d+s+")*"),y="(?:"+[l+a+"?",a,c,f,i].join("|")+")",v=RegExp(u+"(?="+u+")|"+y+p,"g"),h=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),m="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,b="object"==typeof self&&self&&self.Object===Object&&self,g=m||b||Function("return this")();function w(t){return h.test(t)}function A(t){return w(t)?function(t){return t.match(v)||[]}(t):function(t){return t.split("")}(t)}var S=Object.prototype.toString,F=g.Symbol,D=F?F.prototype:void 0,E=D?D.toString:void 0;function x(t){if("string"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&S.call(t)==n}(t))return E?E.call(t):"";var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}function C(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:function(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i}(t,e,r)}function O(t){return null==t?"":x(t)}var T,j=(T="toUpperCase",function(t){var e=w(t=O(t))?A(t):void 0,r=e?e[0]:t.charAt(0),n=e?C(e,1).join(""):t.slice(1);return r[T]()+n});t.exports=function(t){return j(O(t).toLowerCase())}}},e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function o(t){var e=l();return function(){var r,n=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return i(this,r)}}function i(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):r}function a(t){var e="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return u(t,arguments,f(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,t)})(t)}function u(t,e,r){return(u=l()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&c(o,r.prototype),o}).apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=function(t){n(i,t);var r=o(i);function i(t){return e(this,i),r.call(this,t)}return i}(function(t){n(i,t);var r=o(i);function i(t){var n;return e(this,i),(n=r.call(this)).message=t,n.stack=(new Error).stack,n.name=n.constructor.name,n}return i}(a(Error))),d=function(t){n(i,t);var r=o(i);function i(t){return e(this,i),r.call(this,t)}return i}(s),p=function(t){n(i,t);var r=o(i);function i(t){return e(this,i),r.call(this,t)}return i}(s),y=function(t){n(i,t);var r=o(i);function i(t){return e(this,i),r.call(this,t)}return i}(s);function v(t,e){chrome.runtime.sendMessage({event:"SUCCESSFUL_SCRAPER",searchType:e,providerName:t})}function h(t,e,r){chrome.runtime.sendMessage({event:"FAILED_SCRAPER",searchType:r,providerName:t,description:"".concat(e.name," ").concat(e.message)})}function m(){chrome.runtime.sendMessage({event:"FOCUS_WEBPAGE"})}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=0;return e&&r&&(n+=g(e,r)),new Promise((function(e){setTimeout(e,t+n)}))}function g(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}var w=function(t){return t.offsetWidth>0&&t.offsetHeight>0};function A(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||S(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){if(t){if("string"==typeof t)return F(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F(t,e):void 0}}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var D=/\.(?:(?:[\x2D0-9A-Z_a-z\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])|\\(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))+/,E=/#(?:(?:[\x2D0-9A-Z_a-z\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])|\\(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))+/,x=/\[[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*((?:(?:\*|[\x2D0-9A-Z_a-z]*)\|)?(?:(?:[\x2D0-9A-Z_a-z\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+))/g,C={};function O(t){var e=C[t];if(e)return e;e=C[t]={attributes:!0,subtree:!0,childList:!0};var r,n=[],o=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=S(t))){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(t.matchAll(x));try{for(o.s();!(r=o.n()).done;){var i=A(r.value,2)[1];if(i.startsWith("*")||i.startsWith("|"))return e;n.push(i.replace("|",":"))}}catch(t){o.e(t)}finally{o.f()}return D.test(t)&&n.push("class"),E.test(t)&&n.push("id"),0===n.length?e.attributes=!1:e.attributeFilter=n,e}function T(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.timeout,n=void 0===r?2500:r,o=e.scope,i=void 0===o?document:o;return new Promise((function(e){var r=i.querySelector(t);if(null===r){var o=null,a=new MutationObserver((function(){var r=i.querySelector(t);null!==r&&(clearTimeout(o),a.disconnect(),e(r))}));a.observe(i,O(t)),o=setTimeout((function(){a.disconnect(),e(null)}),n)}else e(r)}))}function j(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.timeout,n=void 0===r?2500:r,o=e.scope,i=void 0===o?document:o;return new Promise((function(e){var r=null;if(null!==i.querySelector(t)){var o=new MutationObserver((function(){null===i.querySelector(t)&&(clearTimeout(r),o.disconnect(),e(!0))}));o.observe(i,O(t)),r=setTimeout((function(){o.disconnect(),e(!1)}),n)}else e(!0)}))}function R(t,e,r,n,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void r(t)}u.done?e(l):Promise.resolve(l).then(n,o)}function I(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){R(i,n,o,a,u,"next",t)}function u(t){R(i,n,o,a,u,"throw",t)}a(void 0)}))}}var U=function(){var t=I((function*(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.document;if(r.querySelector(e)){var n=yield j(e,{timeout:t,scope:r});if(!n)throw new d("Took longer than ".concat(t," ms to make the loading indicator (").concat(e,") disappear"))}}));return function(e,r){return t.apply(this,arguments)}}(),k=function(){var t=I((function*(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.document,n=r.querySelector(e);if(!n&&!(n=yield T(e,{timeout:t,scope:r})))throw new d("Render of ".concat(e," failed to complete in ").concat(t));return n}));return function(){return t.apply(this,arguments)}}();function P(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return M(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function B(t,e,r,n,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void r(t)}u.done?e(l):Promise.resolve(l).then(n,o)}function _(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){B(i,n,o,a,u,"next",t)}function u(t){B(i,n,o,a,u,"throw",t)}a(void 0)}))}}var N="div[class='trip']",q=".trip-list",L=function(){var t=_((function*(t){yield H(t);var e=t?"RETURN":"DEPARTURE",r=P(document.querySelectorAll(q),2),n=r[0],o=r[1],i="DEPARTURE"===e?n:o;if(!i)throw yield b(6e4),new y("Unable to locate ".concat(e.toLowerCase()," container"));if(!w(i))throw yield b(6e4),new s("Flight container is not visible");var a=i.querySelector(".infinite-trip-list");if(!a)throw new y("Unable to locate infinite scroll container for ".concat(e.toLowerCase()));var u=a.children[0];if(!u)throw new y("Unable to locate infinite scroll container child for ".concat(e.toLowerCase()));return k(15e3,N,i),u}));return function(e){return t.apply(this,arguments)}}(),H=function(){var t=_((function*(t){(yield k(3e3,"section #trip-list-wrapper"),yield k(3e3,q),yield k(1e4,"[data-sort='cost']"),yield U(15e3,"div.spinner-title"),yield k(15e3,N),t&&(yield k(1e4,".trip-return-header"),yield b(250)),function(){var t=document.querySelector("input[data-name='standard']");if(t){var e,r=null===(e=t.parentElement)||void 0===e?void 0:e.querySelector(".only");r&&r.click()}}(),function(t){var e=document.querySelector(".trip-list-empty");if(!e){if(t)return!1;throw new y("Unable to find the no results container")}return w(e)}(t))&&function(t,e){chrome.runtime.sendMessage({event:"NO_FLIGHTS_FOUND",provider:t,searchType:e})}("skiplagged",t?"RETURN":"DEPARTURE")}));return function(e){return t.apply(this,arguments)}}();function G(t,e){chrome.runtime.sendMessage({event:"RETURN_FLIGHTS_RECEIVED",flights:e,provider:t})}function W(t,e){chrome.runtime.sendMessage({event:"FLIGHT_RESULTS_RECEIVED",flights:e,provider:t})}var $=function(t){return t.toLowerCase().replace(" ","").trim()};function z(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return K(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Z(t,e){var r=t.toLowerCase(),n=z(r.split(":"),2),o=n[0],i=n[1];o=Number(o);var a=Number(i.replace(/(pm)|(am)|(\+\d)/g,"").trim());if(e){var u=t.match(/(\+\d)/);u&&(o+=24*u[0].split("+")[1])}return r.includes("pm")&&o%12!=0?o+=12:r.includes("am")&&o%12==0&&(o-=12),{hours:o,minutes:a}}function J(t,e,r){var n=Z(t),o=n.hours,i=n.minutes,a=Z(e),u=a.hours,l=a.minutes,c=e.match(/(\+\d)/),f=t.match(/(\+\d)/),s=0,d=0;if(f){var p=z(f[0].split("+"),2),y=(p[0],p[1]);d=s+=Number(y)}if(c){var v=z(c[0].split("+"),2),h=(v[0],v[1]);d+=Number(h)}var m=60*(o+24*s)+i,b=60*(u+24*d)+l;return function(t){var e,r;if(t.includes("h")){var n=z(t.split("h"),2);e=n[0],r=n[1]}else e=0,r=t;var o=r.trim().split("m")[0]||0;return Number(o)+60*Number(e)}(r)-(b-m)}var V=r(1633),Q=r.n(V);function Y(t){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t,e){X=function(t,e){return new i(t,void 0,e)};var r=et(RegExp),n=RegExp.prototype,o=new WeakMap;function i(t,e,n){var i=r.call(this,t,e);return o.set(i,n||o.get(t)),i}function a(t,e){var r=o.get(e);return Object.keys(r).reduce((function(e,n){return e[n]=t[r[n]],e}),Object.create(null))}return tt(i,r),i.prototype.exec=function(t){var e=n.exec.call(this,t);return e&&(e.groups=a(e,this)),e},i.prototype[Symbol.replace]=function(t,e){if("string"==typeof e){var r=o.get(this);return n[Symbol.replace].call(this,t,e.replace(/\$<([^>]+)>/g,(function(t,e){return"$"+r[e]})))}if("function"==typeof e){var i=this;return n[Symbol.replace].call(this,t,(function(){var t=[];return t.push.apply(t,arguments),"object"!==Y(t[t.length-1])&&t.push(a(t,i)),e.apply(this,t)}))}return n[Symbol.replace].call(this,t,e)},X.apply(this,arguments)}function tt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ot(t,e)}function et(t){var e="function"==typeof Map?new Map:void 0;return(et=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return rt(t,arguments,it(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ot(n,t)})(t)}function rt(t,e,r){return(rt=nt()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&ot(o,r.prototype),o}).apply(null,arguments)}function nt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function ot(t,e){return(ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function it(t){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var at=function(t){var e=X(/^([\t-\r 0-9A-Z_a-z\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+as[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+(alaska)([a-z]{1,20})$/i,{airline:1,dbaPart1:2,dbaPart2:3}),r=t;if(e.test(r)){var n=r.match(e);r="".concat(n.groups.airline," as ").concat(n.groups.dbaPart1," ").concat(Q()(n.groups.dbaPart2))}return r};const ut={airlineDetailsMap:{"American Airlines":{display:"American",color:"#C5423E",code:"AA"},American:{display:"American",color:"#C5423E",code:"AA"},Delta:{display:"Delta",color:"#EE722E",code:"DL"},"Delta Air Lines":{display:"Delta",color:"#EE722E",code:"DL"},"Southwest Airlines":{display:"Southwest",color:"#F6C04D",code:"WN"},Southwest:{display:"Southwest",color:"#F6C04D",code:"WN"},United:{display:"United",color:"#235EA6",code:"UA"},"United Airlines":{display:"United",color:"#235EA6",code:"UA"},"Air Canada":{display:"Air Canada",color:"#E53222",code:"AC"},Alaska:{display:"Alaska",color:"#51172C",code:"AS"},"Alaska Airlines":{display:"Alaska",color:"#51172C",code:"AS"},jetBlue:{display:"jetBlue",color:"#5F90C8",code:"B6"},"JetBlue Airways":{display:"jetBlue",color:"#5F90C8",code:"B6"},Spirit:{display:"Spirit",color:"#BBB140",code:"NK"},"Spirit Airlines":{display:"Spirit",color:"#BBB140",code:"NK"},WestJet:{display:"WestJet",color:"#4BA89C",code:"WS"},Aeromexico:{display:"Aeromexico",color:"#000000",code:"AM"},Frontier:{display:"Frontier",color:"#378055",code:"F9"},"Frontier Airlines":{display:"Frontier",color:"#378055",code:"F9"},Interjet:{display:"Interjet",color:"#A8A8A8",code:"4O"},"Hawaiian Airlines":{display:"Hawaiian",color:"#4D388A",code:"HA"},"Sun Country":{display:"Sun Country",color:"#D79A71",code:"SY"},"Sun Country Airlines":{display:"Sun Country",color:"#D79A71",code:"SY"},"Porter Airlines":{display:"Porter",color:"#0F2B53",code:"PD"},"China Southern Airlines":{display:"China Southern",color:"#93ACCA",code:"CZ"},Lufthansa:{display:"Lufthansa",color:"#EFB95D",code:"LH"},SWISS:{display:"Swiss",color:"#D42D21",code:"LX"},"China Eastern Airlines":{display:"China Eastern",color:"#A9545F",code:"MU"},"British Airways":{display:"British",color:"#EA8E8C",code:"BA"},Iberia:{display:"Iberia",color:"#D05653",code:"IB"},"Air China":{display:"Air China",color:"#DF524B",code:"CA"},"Emirates Airlines":{display:"Emirates",color:"#CF534F",code:"EK"},"KLM-Royal Dutch Airlines":{display:"KLM",color:"#44A0DC",code:"KL"},"Air France":{display:"Air France",color:"#DB3832",code:"AF"},"Turkish Airlines":{display:"Turkish",color:"#DB3832",code:"TK"},"Cathay Pacific":{display:"Cathay",color:"#2A645A",code:"CX"},"Cathay Dragon":{display:"Cathay",color:"#2A645A",code:"CX"},"EVA Airways":{display:"EVA",color:"#6F9F64",code:"BR"},"China Airlines":{display:"China Airlines",color:"#DAABB1",code:"CI"},"ANA Airlines":{display:"ANA",color:"#254897",code:"NH"},"Japan Airlines":{display:"Japan Airlines",color:"#E56E69",code:"JL"},"Air India":{display:"Air India",color:"#D47346",code:"AI"},"Air India Limited":{display:"Air India",color:"#D47346",code:"AI"},"Qantas Airways":{display:"Qantas",color:"#E34538",code:"QF"},"Singapore Airlines":{display:"Singapore",color:"#EFA952",code:"SQ"},"ANA (All Nippon Airways)":{display:"ANA",color:"#0f4a8d"}},getAirlineName:function(t){if(t&&"string"==typeof t){var e=t.trim().replace(/\s+/g," ");e=at(e);var r=this.airlineDetailsMap[e];return r&&(e=r.display),e}},getAirlineDetails:function(t){var e=t.trim().replace(/\s+/g," ");return e=at(e),this.airlineDetailsMap[e]||{display:e,color:"#DFCCFB"}}};function lt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ct=function(){function t(e){var r=e.fromTime,n=e.toTime,o=e.operatingAirline,i=e.marketingAirline,a=e.duration,u=e.layovers;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fromTime=r,this.fromTimeDetails=this.getTimeDetails(r),this.toTime=n,this.toTimeDetails=this.getTimeDetails(n),this.duration=a,this.operatingAirline=ut.getAirlineName(o),this.operatingAirlineDetails=o?ut.getAirlineDetails(o):null,this.marketingAirline=ut.getAirlineName(i),this.marketingAirlineDetails=i?ut.getAirlineDetails(i):null,this.layovers=u,this.timezoneOffset=this.getTimezoneOffset(),this.id=this.getFlightPenguinId()}var e,r,n;return e=t,(r=[{key:"getTimeDetails",value:function(t){var e=Z(t,!0),r=e.hours,n=e.minutes,o=t.toLowerCase().includes("pm")?"pm":"am",i=t.match(/(\+\d)/);return{hours:r,displayHours:Number(t.split(":")[0]),minutes:n,timeOfDay:o,excessDays:i?i[0]:i}}},{key:"getFlightPenguinId",value:function(){return"".concat(this.operatingAirline,"-").concat(this.fromTime,"-").concat(this.toTime)}},{key:"getTimezoneOffset",value:function(){return J(this.fromTime,this.toTime,this.duration)}}])&&lt(e.prototype,r),n&&lt(e,n),t}(),ft=function(t){var e,r=t.querySelector("span.airlines");if(!r)throw new y("Unable to find airline tooltip container");var n=null===(e=r.dataset)||void 0===e?void 0:e.originalTitle;if(!n)throw new p("Unable to find original title of tooltip");var o=(new DOMParser).parseFromString(n,"text/html").querySelectorAll("span");if(!o)throw new p("Unable to find span in tooltip");return Array.from(o).map((function(t){return t.textContent||""}))};function st(t){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dt(t,e){dt=function(t,e){return new i(t,void 0,e)};var r=yt(RegExp),n=RegExp.prototype,o=new WeakMap;function i(t,e,n){var i=r.call(this,t,e);return o.set(i,n||o.get(t)),i}function a(t,e){var r=o.get(e);return Object.keys(r).reduce((function(e,n){return e[n]=t[r[n]],e}),Object.create(null))}return pt(i,r),i.prototype.exec=function(t){var e=n.exec.call(this,t);return e&&(e.groups=a(e,this)),e},i.prototype[Symbol.replace]=function(t,e){if("string"==typeof e){var r=o.get(this);return n[Symbol.replace].call(this,t,e.replace(/\$<([^>]+)>/g,(function(t,e){return"$"+r[e]})))}if("function"==typeof e){var i=this;return n[Symbol.replace].call(this,t,(function(){var t=[];return t.push.apply(t,arguments),"object"!==st(t[t.length-1])&&t.push(a(t,i)),e.apply(this,t)}))}return n[Symbol.replace].call(this,t,e)},dt.apply(this,arguments)}function pt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mt(t,e)}function yt(t){var e="function"==typeof Map?new Map:void 0;return(yt=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return vt(t,arguments,bt(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),mt(n,t)})(t)}function vt(t,e,r){return(vt=ht()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&mt(o,r.prototype),o}).apply(null,arguments)}function ht(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function mt(t,e){return(mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bt(t){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gt=dt(/^([ A-Za-z]*)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*([Ff]light)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*([0-9]*)$/,{Airline:1,Flight:2,Number:3}),wt=function(t){var e,r,n,o=null===(e=t.match(gt))||void 0===e||null===(r=e.groups)||void 0===r||null===(n=r.Airline)||void 0===n?void 0:n.trim();if(!o)throw new s("Unable to extract airline name from ".concat(t));var i=ut.getAirlineName(o);if(!i)throw new s("Unable to extract airline name from airline map");return i};function At(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return St(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return St(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function St(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Ft=/trip-path-point\b/,Dt=/trip-path-spacer\b/,Et=function(t,e){var r,n=t.querySelector("div[class*='trip-path-point-time']");if(!n)throw new y("Unable to determine waypoint time");var o=n.textContent;if(!o)throw new p("Unable to extract time");var i=parseInt((null===(r=n.dataset)||void 0===r?void 0:r.diffDays)||"0");return i&&i>e&&(o+="+".concat(i-e)),{time:$(o),dateDifference:i}},xt=function(t){var e=t.querySelector("span[class='airport-code']");if(!e)throw new y("Unable to determine waypoint airport");var r=e.textContent;if(!r)throw new p("Unable to extract airport code");return r},Ct=function(t){var e=t.querySelector(".trip-path-spacer-label");if(!e)throw new y("Unable to determine spacer duration");var r=e.textContent;if(!r)throw new p("Unable to extract duration");return r.trim()};function Ot(t){return function(t){if(Array.isArray(t))return jt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Tt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(t,e){if(t){if("string"==typeof t)return jt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jt(t,e):void 0}}function jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Rt(t,e,r,n,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void r(t)}u.done?e(l):Promise.resolve(l).then(n,o)}var It="div[class*='trip-path-point-time']",Ut=/\d{1,2} stops?/i,kt=function(){var t,e=(t=function*(t){yield k(3e3,"section #trip-list-wrapper"),yield k(1e4,"[data-sort='cost']");var e=Mt(t),r=Bt(t),n=_t(t),o=Pt(t),i=o.duration,a=o.hasStops,u=function(t){var e=t.querySelector("div.trip-path");if(!e)throw new y("Unable to lookup trip container");var r=e.querySelectorAll(".trip-path-point, .trip-path-spacer");if(!r)throw new y("Unable to lookup trip components");var n,o=ft(t),i=[],a={},u=0,l=!1,c=At(r);try{for(c.s();!(n=c.n()).done;){var f=n.value;if(l)l=!1;else{var d=f.getAttribute("class")||"";switch(!0){case Ft.test(d):if(a.from){a.to=xt(f);var p=Et(f,u),v=p.time,h=p.dateDifference;a.toTime=v,u=h,i.push(a),a={},l=!0}else{a.from=xt(f);var m=Et(f,u),b=m.time,g=m.dateDifference;a.fromTime=b,u=g}break;case Dt.test(d):a.duration=Ct(f),a.operatingAirline=wt(o[i.length]);break;default:throw new s("Unknown case option ".concat(f.getAttribute("class")))}}}}catch(t){c.e(t)}finally{c.f()}if(!i)throw new s("Unable to identify layovers");return i}(t);return a||(u=[]),new ct({marketingAirline:e,operatingAirline:null,layovers:u,duration:i,fromTime:r,toTime:n})},function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Rt(i,n,o,a,u,"next",t)}function u(t){Rt(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}(),Pt=function(t){var e,r,n=t.querySelector("span.trip-path-duration");if(!n)throw new y("Unable to lookup flight duration time");var o=null===(e=n.textContent)||void 0===e?void 0:e.split("|")[0].trim(),i=Ut.test((null===(r=n.textContent)||void 0===r?void 0:r.split("|")[1].trim())||"");if(!o)throw new p("Unable to determine duration time for flight");return{duration:o,hasStops:i}},Mt=function(t){var e,r=new Set,n=function(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=Tt(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(ft(t));try{for(n.s();!(e=n.n()).done;){var o=e.value,i=wt(o);r.add(i)}}catch(t){n.e(t)}finally{n.f()}return 1===r.size?Ot(r)[0]:"Multiple airlines"},Bt=function(t){var e,r=t.querySelector(It);if(!r)throw new y("Unable to determine departure time");var n=r.textContent;if(!n)throw new p("Unable to extract departure time");var o=parseInt((null===(e=r.dataset)||void 0===e?void 0:e.diffDays)||"0");return o&&(n+="+".concat(o)),$(n)},_t=function(t){var e,r=t.querySelectorAll(It);if(!r)throw new y("Unable to find time elements");var n=Array.from(r).slice(-1)[0];if(!n)throw new y("Unable to find arrival time");var o=n.textContent;if(!o)throw new p("Unable to extract arrival time");var i=parseInt((null===(e=n.dataset)||void 0===e?void 0:e.diffDays)||"0");return i&&(o+="+".concat(i)),$(o)};function Nt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(t,e)||Lt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qt(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=Lt(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function Lt(t,e){if(t){if("string"==typeof t)return Ht(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ht(t,e):void 0}}function Ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Gt(t,e,r,n,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void r(t)}u.done?e(l):Promise.resolve(l).then(n,o)}var Wt=function(){var t,e=(t=function*(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=[],i={},a=qt(t);try{for(a.s();!(r=a.n()).done;){var u=r.value,l=u;if(!$t(l)){var c=yield kt(l),f=n?[n,c]:[c,null],s=Nt(f,2),d=s[0],p=s[1],y=Zt(l),v=Kt(c),h=Jt(l);l.dataset.fpid=v,l.dataset.visited="true",zt(v,h,e)||(o.push({departureFlight:d,returnFlight:p,fare:y}),i[v]={skiplaggedId:h,lastUpdatedAt:new Date})}}}catch(t){a.e(t)}finally{a.f()}var m=n?G:W;return o.length&&m("skiplagged",o),i},function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Gt(i,n,o,a,u,"next",t)}function u(t){Gt(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t,r){return e.apply(this,arguments)}}(),$t=function(t){return["bargain fare","special fare","after booking"].some((function(e){var r;return null===(r=t.textContent)||void 0===r?void 0:r.includes(e)}))},zt=function(t,e,r){var n=r[t];return!(!n||n.skiplaggedId!==e)},Kt=function(t){return[t.fromTime,t.toTime,t.marketingAirline].join("-")},Zt=function(t){var e=t.querySelector("div.trip-cost");if(!e)throw new y("Unable to find fare wrapper");var r=e.querySelector("p");if(!r)throw new y("Unable to find fare container");return r.textContent},Jt=function(t){return t.id.split('"key":')[1].split(",")[0].replace(/\W/g,"").trim()};function Vt(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Qt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qt(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function Qt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Yt(t,e,r,n,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void r(t)}u.done?e(l):Promise.resolve(l).then(n,o)}function Xt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Yt(i,n,o,a,u,"next",t)}function u(t){Yt(i,n,o,a,u,"throw",t)}a(void 0)}))}}function te(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ee(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var re=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;te(this,t),this.flightMap={};var r=this;this.observer=new MutationObserver(function(){var t=Xt((function*(t){var n,o=[],i=Vt(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;o=o.concat(Array.from(a.addedNodes))}}catch(t){i.e(t)}finally{i.f()}var u=yield Wt(o,r.flightMap,e);r.addNewFlightsToMap(u)}));return function(e){return t.apply(this,arguments)}}())}var e,r,n;return e=t,(r=[{key:"addNewFlightsToMap",value:function(t){for(var e in t){var r=t[e],n=r.skiplaggedId,o=r.lastUpdatedAt,i=this.flightMap[e];i?i.skiplaggedId!==n&&o>i.lastUpdatedAt&&(this.flightMap[e]={skiplaggedId:n,lastUpdatedAt:o}):this.flightMap[e]={skiplaggedId:n,lastUpdatedAt:o}}}},{key:"getSkiplaggedId",value:function(t){return this.flightMap[t].skiplaggedId}},{key:"beginObservation",value:function(t){this.observer.observe(t,{childList:!0})}},{key:"endObservation",value:function(){this.observer.disconnect()}},{key:"getFlightMap",value:function(){return this.flightMap}}])&&ee(e.prototype,r),n&&ee(e,n),t}(),ne=function(t){var e=window.pageYOffset+t.getBoundingClientRect().top-window.innerHeight/2;window.scrollTo({top:e,behavior:"smooth"})};function oe(t,e,r,n,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void r(t)}u.done?e(l):Promise.resolve(l).then(n,o)}function ie(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){oe(i,n,o,a,u,"next",t)}function u(t){oe(i,n,o,a,u,"throw",t)}a(void 0)}))}}var ae="div[class='trip']",ue="stop-scrolling",le="div#".concat(ue),ce=function(){var t=ie((function*(t){yield U(45e3,".ui-mprogress"),yield k(45e3,ae,t),ye(null),yield b(150);for(var e=(new Date).getTime();se(e)<6e4&&!de(!1);)yield fe(t),yield b(300,100,200)}));return function(e){return t.apply(this,arguments)}}(),fe=function(){var t=ie((function*(t){window.scrollTo({top:0,behavior:"smooth"}),yield b(2e3,100,300);for(var e=ve(t),r=null;e!==r&&!de(!1);){var n=t.querySelectorAll(ae);if(r=Array.from(n).slice(-1)[0],ne(r),de(!1))break;yield b(500,50,100),e=ve(t)}}));return function(e){return t.apply(this,arguments)}}(),se=function(t){return(new Date).getTime()-t},de=function(t){var e=document.querySelector(le),r=!!e;return r&&t&&ye(e),r},pe=function(t){var e=document.createElement("div");e.id=ue,t&&e.setAttribute("data-reason",t),document.body.appendChild(e)},ye=function(t){var e=t||document.querySelector(le);e&&e.remove()},ve=function(t){return Array.from(t.querySelectorAll(ae)).slice(-1)[0]};function he(t,e,r,n,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void r(t)}u.done?e(l):Promise.resolve(l).then(n,o)}var me=function(){var t,e=(t=function*(t){pe("Searching for flight card"),yield b(300),window.scrollTo({top:0,behavior:"smooth"}),yield b(2e3);for(var e='div[id*=\'"key":"'.concat(t,"\"']"),r=null,n=ve(document),o=null;n!==o&&!(r=document.querySelector(e));){var i=document.querySelectorAll("div[class='trip']");o=Array.from(i).slice(-1)[0],ne(o),yield b(750,150,200),n=ve(document)}if(ye(null),r)return r;throw new s("Could not find flight card")},function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){he(i,n,o,a,u,"next",t)}function u(t){he(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}();function be(t,e,r,n,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void r(t)}u.done?e(l):Promise.resolve(l).then(n,o)}var ge=function(){var t,e=(t=function*(t){we();var e,r=yield me(t);(e=r).style.border="10px solid #f2554b",e.style.borderRadius="6px",e.style.paddingTop="25px",e.style.paddingBottom="25px",e.dataset.selected="true",ne(r)},function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){be(i,n,o,a,u,"next",t)}function u(t){be(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}(),we=function(){var t,e=document.querySelector("[data-selected='true']");e&&((t=e).dataset.selected="false",t.style.border="",t.style.paddingTop="0px",t.style.paddingBottom="0px",t.style.borderRadius="0px")};function Ae(t,e,r,n,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void r(t)}u.done?e(l):Promise.resolve(l).then(n,o)}function Se(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ae(i,n,o,a,u,"next",t)}function u(t){Ae(i,n,o,a,u,"throw",t)}a(void 0)}))}}var Fe=function(){var t=Se((function*(){(we(),De())&&(Ee().click(),yield xe())}));return function(){return t.apply(this,arguments)}}(),De=function(){var t=document.querySelector(".trip-return-header");if(!t)throw new y("Unable to locate return header");return w(t)},Ee=function(){var t=document.querySelector(".selected-trip");if(!t)throw new y("Unable to selected departure flight card");return t},xe=function(){var t=Se((function*(){yield b(500)}));return function(){return t.apply(this,arguments)}}();function Ce(t,e,r,n,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void r(t)}u.done?e(l):Promise.resolve(l).then(n,o)}var Oe,Te=function(){var t,e=(t=function*(t,e,r){var n=yield me(t),o=je(n),i=Re(o);chrome.runtime.sendMessage({event:"RELOAD_SELECTED_DEPARTURE",providerName:"skiplagged",targetUrl:i,departureId:t,departure:e,departureMap:r})},function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ce(i,n,o,a,u,"next",t)}function u(t){Ce(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t,r,n){return e.apply(this,arguments)}}(),je=function(t){var e,r=t.querySelector("span.airlines");if(!r)throw new y("Unable to locate airlines container in flight card");var n=null===(e=r.dataset)||void 0===e?void 0:e.originalTitle;if(!n)throw new p("Unable to parse original title of flight card airlines");var o=(new DOMParser).parseFromString(n,"text/html").querySelectorAll("span");return Array.from(o).map((function(t){var e,r=t.querySelector("img");if(!r)throw new y("Unable to locate airline image in parsed document");var n=r.src.split("/").slice(-1)[0].split(".")[0],o=null===(e=t.textContent)||void 0===e?void 0:e.split(/\s+/).slice(-1)[0];return"".concat(n).concat(o)})).join("-")},Re=function(t){var e=window.location.href.split("#")[0];return"".concat(e,"#trip=").concat(t)};function Ie(t,e,r,n,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void r(t)}u.done?e(l):Promise.resolve(l).then(n,o)}function Ue(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ie(i,n,o,a,u,"next",t)}function u(t){Ie(i,n,o,a,u,"throw",t)}a(void 0)}))}}window.Sentry.init({dsn:"https://d7f3363dd3774a64ad700b4523bcb789@o407795.ingest.sentry.io/5277451"});var ke,Pe=null,Me=null;chrome.runtime.onMessage.addListener(function(){var t=Ue((function*(t){var e,r,n,o;switch(t.event){case"BEGIN_PARSING":try{Pe=new re(null),(Oe=yield Be(Pe,!1))&&(yield ce(Oe)),v("skiplagged","DEPARTURE"),Pe.endObservation()}catch(t){window.Sentry.captureException(t),h("skiplagged",t,"DEPARTURE")}break;case"GET_RETURN_FLIGHTS":try{var i,a;null===(i=Pe)||void 0===i||i.endObservation(),pe(),yield Te(Ne(Pe,t.departure.id),t.departure,(null===(a=Pe)||void 0===a?void 0:a.getFlightMap())||{})}catch(t){window.Sentry.captureException(t),h("skiplagged",t,"RETURN")}break;case"BEGIN_PARSING_RETURNS":try{var u,l;null===(u=Pe)||void 0===u||u.endObservation(),null===(l=Me)||void 0===l||l.endObservation(),(Pe=new re(null)).addNewFlightsToMap(t.departureMap),Me=new re(t.departure),(ke=yield Be(Me,!0))&&(yield ce(ke)),v("skiplagged","RETURN")}catch(t){window.Sentry.captureException(t),h("skiplagged",t,"RETURN")}break;case"HIGHLIGHT_FLIGHT":pe("Highlight flight"),null===(e=Pe)||void 0===e||e.endObservation(),null===(r=Me)||void 0===r||r.endObservation(),yield _e(t.selectedDepartureId,Pe,t.selectedReturnId,Me);break;case"CLEAR_SELECTION":null===(n=Pe)||void 0===n||n.endObservation(),null===(o=Me)||void 0===o||o.endObservation(),pe("Clear selection(s)"),yield Fe(),chrome.runtime.sendMessage({event:"PROVIDER_READY",provider:"skiplagged"})}}));return function(e){return t.apply(this,arguments)}}());var Be=function(){var t=Ue((function*(t,e){var r=yield L(e);return t.beginObservation(r),r}));return function(e,r){return t.apply(this,arguments)}}(),_e=function(){var t=Ue((function*(t,e,r,n){!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#back-to-search";if(!document.querySelector(t)){var e=document.createElement("button");e.id="back-to-search",e.textContent="Return to FlightPenguin",e.title="Click to return to FlightPenguin and keep browsing.",e.addEventListener("click",m),document.body.append(e)}}();try{var o;if(r)o=null==n?void 0:n.getSkiplaggedId(r);else{if(!t)throw new s("highlighting without a flight...");o=null==e?void 0:e.getSkiplaggedId(t)}yield ge(o||"")}catch(t){window.Sentry.captureException(t),h("skiplagged",t,r?"RETURN":"DEPARTURE")}}));return function(e,r,n,o){return t.apply(this,arguments)}}(),Ne=function(t,e){if(t)return t.getSkiplaggedId(e);throw new s("Departure observer not initialized...")}})()})();