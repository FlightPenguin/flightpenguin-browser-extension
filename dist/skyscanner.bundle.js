(()=>{var t={1633:(t,e,r)=>{var n="[object Symbol]",o="\\u0300-\\u036f\\ufe20-\\ufe23",i="[\\ud800-\\udfff]",a="["+o+"\\u20d0-\\u20f0]",u="\\ud83c[\\udffb-\\udfff]",c="[^\\ud800-\\udfff]",l="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+a+"|"+u+")"+"?",d="[\\ufe0e\\ufe0f]?",p=d+s+("(?:\\u200d(?:"+[c,l,f].join("|")+")"+d+s+")*"),y="(?:"+[c+a+"?",a,l,f,i].join("|")+")",v=RegExp(u+"(?="+u+")|"+y+p,"g"),h=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),m="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,b="object"==typeof self&&self&&self.Object===Object&&self,w=m||b||Function("return this")();function A(t){return h.test(t)}function g(t){return A(t)?function(t){return t.match(v)||[]}(t):function(t){return t.split("")}(t)}var F=Object.prototype.toString,S=w.Symbol,D=S?S.prototype:void 0,C=D?D.toString:void 0;function E(t){if("string"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&F.call(t)==n}(t))return C?C.call(t):"";var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}function x(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:function(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i}(t,e,r)}function O(t){return null==t?"":E(t)}var j,P=(j="toUpperCase",function(t){var e=A(t=O(t))?g(t):void 0,r=e?e[0]:t.charAt(0),n=e?x(e,1).join(""):t.slice(1);return r[j]()+n});t.exports=function(t){return P(O(t).toLowerCase())}}},e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";function t(){chrome.runtime.sendMessage({event:"FOCUS_WEBPAGE"})}function e(t,e){chrome.runtime.sendMessage({event:"NO_FLIGHTS_FOUND",provider:t,searchType:e})}function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(t,e)||o(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var a=/\.(?:(?:[\x2D0-9A-Z_a-z\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])|\\(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))+/,u=/#(?:(?:[\x2D0-9A-Z_a-z\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])|\\(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))+/,c=/\[[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*((?:(?:\*|[\x2D0-9A-Z_a-z]*)\|)?(?:(?:[\x2D0-9A-Z_a-z\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+))/g,l={};function f(t){var e=l[t];if(e)return e;e=l[t]={attributes:!0,subtree:!0,childList:!0};var r,i=[],f=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=o(t))){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return u=t.done,t},e:function(t){c=!0,a=t},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw a}}}}(t.matchAll(c));try{for(f.s();!(r=f.n()).done;){var s=n(r.value,2)[1];if(s.startsWith("*")||s.startsWith("|"))return e;i.push(s.replace("|",":"))}}catch(t){f.e(t)}finally{f.f()}return a.test(t)&&i.push("class"),u.test(t)&&i.push("id"),0===i.length?e.attributes=!1:e.attributeFilter=i,e}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.timeout,n=void 0===r?2500:r,o=e.scope,i=void 0===o?document:o;return new Promise((function(e){var r=i.querySelector(t);if(null===r){var o=null,a=new MutationObserver((function(){var r=i.querySelector(t);null!==r&&(clearTimeout(o),a.disconnect(),e(r))}));a.observe(i,f(t)),o=setTimeout((function(){a.disconnect(),e(null)}),n)}else e(r)}))}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.timeout,n=void 0===r?2500:r,o=e.scope,i=void 0===o?document:o;return new Promise((function(e){var r=null;if(null!==i.querySelector(t)){var o=new MutationObserver((function(){null===i.querySelector(t)&&(clearTimeout(r),o.disconnect(),e(!0))}));o.observe(i,f(t)),r=setTimeout((function(){o.disconnect(),e(!1)}),n)}else e(!0)}))}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}function h(t){var e=A();return function(){var r,n=F(t);if(e){var o=F(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function b(t){var e="function"==typeof Map?new Map:void 0;return(b=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return w(t,arguments,F(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),g(n,t)})(t)}function w(t,e,r){return(w=A()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&g(o,r.prototype),o}).apply(null,arguments)}function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var S=function(t){v(r,t);var e=h(r);function r(t){return y(this,r),e.call(this,t)}return r}(function(t){v(r,t);var e=h(r);function r(t){var n;return y(this,r),(n=e.call(this)).message=t,n.stack=(new Error).stack,n.name=n.constructor.name,n}return r}(b(Error))),D=function(t){v(r,t);var e=h(r);function r(t){return y(this,r),e.call(this,t)}return r}(S),C=function(t){v(r,t);var e=h(r);function r(t){return y(this,r),e.call(this,t)}return r}(S),E=function(t){v(r,t);var e=h(r);function r(t){return y(this,r),e.call(this,t)}return r}(S);function x(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function O(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){x(i,n,o,a,u,"next",t)}function u(t){x(i,n,o,a,u,"throw",t)}a(void 0)}))}}var j=function(){var t=O((function*(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.document;if(r.querySelector(e)){var n=yield d(e,{timeout:t,scope:r});if(!n)throw new D("Took longer than ".concat(t," ms to make the loading indicator (").concat(e,") disappear"))}}));return function(e,r){return t.apply(this,arguments)}}(),P=function(){var t=O((function*(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.document,n=r.querySelector(e);if(!n&&!(n=yield s(e,{timeout:t,scope:r})))throw new D("Render of ".concat(e," failed to complete in ").concat(t));return n}));return function(){return t.apply(this,arguments)}}();function T(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}var _=function(){var t,e=(t=function*(){var t=document.querySelectorAll("iframe");if(!t)throw new E("Unable to locate iframes in captcha page");for(var e=0;e<t.length;e++)window[e].document.body.dispatchEvent(new Event("mousedown"));yield P(15e3,"#pagewrap")},function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){T(i,n,o,a,u,"next",t)}function u(t){T(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}(),I=function(t){return t.toLowerCase().replace(" ","").trim()},B=r(1633),R=r.n(B);function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(t,e){L=function(t,e){return new i(t,void 0,e)};var r=q(RegExp),n=RegExp.prototype,o=new WeakMap;function i(t,e,n){var i=r.call(this,t,e);return o.set(i,n||o.get(t)),i}function a(t,e){var r=o.get(e);return Object.keys(r).reduce((function(e,n){return e[n]=t[r[n]],e}),Object.create(null))}return k(i,r),i.prototype.exec=function(t){var e=n.exec.call(this,t);return e&&(e.groups=a(e,this)),e},i.prototype[Symbol.replace]=function(t,e){if("string"==typeof e){var r=o.get(this);return n[Symbol.replace].call(this,t,e.replace(/\$<([^>]+)>/g,(function(t,e){return"$"+r[e]})))}if("function"==typeof e){var i=this;return n[Symbol.replace].call(this,t,(function(){var t=[];return t.push.apply(t,arguments),"object"!==U(t[t.length-1])&&t.push(a(t,i)),e.apply(this,t)}))}return n[Symbol.replace].call(this,t,e)},L.apply(this,arguments)}function k(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&H(t,e)}function q(t){var e="function"==typeof Map?new Map:void 0;return(q=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return M(t,arguments,W(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),H(n,t)})(t)}function M(t,e,r){return(M=N()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&H(o,r.prototype),o}).apply(null,arguments)}function N(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function H(t,e){return(H=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function W(t){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $=function(t){var e=L(/^([\t-\r 0-9A-Z_a-z\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+as[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+(alaska)([a-z]{1,20})$/i,{airline:1,dbaPart1:2,dbaPart2:3}),r=t;if(e.test(r)){var n=r.match(e);r="".concat(n.groups.airline," as ").concat(n.groups.dbaPart1," ").concat(R()(n.groups.dbaPart2))}return r};const G={airlineDetailsMap:{"American Airlines":{display:"American",color:"#C5423E",code:"AA"},American:{display:"American",color:"#C5423E",code:"AA"},Delta:{display:"Delta",color:"#EE722E",code:"DL"},"Delta Air Lines":{display:"Delta",color:"#EE722E",code:"DL"},WN:{display:"Southwest",color:"#F6C04D",code:"WN"},"Southwest Airlines":{display:"Southwest",color:"#F6C04D",code:"WN"},Southwest:{display:"Southwest",color:"#F6C04D",code:"WN"},United:{display:"United",color:"#235EA6",code:"UA"},"United Airlines":{display:"United",color:"#235EA6",code:"UA"},"Air Canada":{display:"Air Canada",color:"#E53222",code:"AC"},Alaska:{display:"Alaska",color:"#51172C",code:"AS"},"Alaska Airlines":{display:"Alaska",color:"#51172C",code:"AS"},jetBlue:{display:"jetBlue",color:"#5F90C8",code:"B6"},"JetBlue Airways":{display:"jetBlue",color:"#5F90C8",code:"B6"},Spirit:{display:"Spirit",color:"#BBB140",code:"NK"},"Spirit Airlines":{display:"Spirit",color:"#BBB140",code:"NK"},WestJet:{display:"WestJet",color:"#4BA89C",code:"WS"},Aeromexico:{display:"Aeromexico",color:"#000000",code:"AM"},Frontier:{display:"Frontier",color:"#378055",code:"F9"},"Frontier Airlines":{display:"Frontier",color:"#378055",code:"F9"},Interjet:{display:"Interjet",color:"#A8A8A8",code:"4O"},"Hawaiian Airlines":{display:"Hawaiian",color:"#4D388A",code:"HA"},"Sun Country":{display:"Sun Country",color:"#D79A71",code:"SY"},"Sun Country Airlines":{display:"Sun Country",color:"#D79A71",code:"SY"},"Porter Airlines":{display:"Porter",color:"#0F2B53",code:"PD"},"China Southern Airlines":{display:"China Southern",color:"#93ACCA",code:"CZ"},Lufthansa:{display:"Lufthansa",color:"#EFB95D",code:"LH"},SWISS:{display:"Swiss",color:"#D42D21",code:"LX"},"China Eastern Airlines":{display:"China Eastern",color:"#A9545F",code:"MU"},"British Airways":{display:"British",color:"#EA8E8C",code:"BA"},Iberia:{display:"Iberia",color:"#D05653",code:"IB"},"Air China":{display:"Air China",color:"#DF524B",code:"CA"},"Emirates Airlines":{display:"Emirates",color:"#CF534F",code:"EK"},"KLM-Royal Dutch Airlines":{display:"KLM",color:"#44A0DC",code:"KL"},"Air France":{display:"Air France",color:"#DB3832",code:"AF"},"Turkish Airlines":{display:"Turkish",color:"#DB3832",code:"TK"},"Cathay Pacific":{display:"Cathay",color:"#2A645A",code:"CX"},"Cathay Dragon":{display:"Cathay",color:"#2A645A",code:"CX"},"EVA Airways":{display:"EVA",color:"#6F9F64",code:"BR"},"China Airlines":{display:"China Airlines",color:"#DAABB1",code:"CI"},"ANA Airlines":{display:"ANA",color:"#254897",code:"NH"},"Japan Airlines":{display:"Japan Airlines",color:"#E56E69",code:"JL"},"Air India":{display:"Air India",color:"#D47346",code:"AI"},"Air India Limited":{display:"Air India",color:"#D47346",code:"AI"},"Qantas Airways":{display:"Qantas",color:"#E34538",code:"QF"},"Singapore Airlines":{display:"Singapore",color:"#EFA952",code:"SQ"},"ANA (All Nippon Airways)":{display:"ANA",color:"#0f4a8d"}},getAirlineName:function(t){if(t&&"string"==typeof t){var e=t.trim().replace(/\s+/g," ");e=$(e);var r=this.airlineDetailsMap[e];return r&&(e=r.display),e}},getAirlineDetails:function(t){var e=t.trim().replace(/\s+/g," ");return e=$(e),this.airlineDetailsMap[e]||{display:e,color:"#DFCCFB"}}};function K(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return z(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function J(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}var Z=function(){var t,e=(t=function*(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15e3,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=document.createElement("iframe"),a="iframe";if(n&&(i.id=n,a+="#id"),o){var u,c=K(o);try{for(c.s();!(u=c.n()).done;){var l=u.value;i.classList.add(l),a+=".".concat(l)}}catch(t){c.e(t)}finally{c.f()}}i.src=e,i.style.display="none",i.dataset.loaded="false",i.onload=function(t){if(!(t.target instanceof HTMLIFrameElement))throw new Error("Unable to resolve iframe");t.target.dataset.loaded="true"},t.appendChild(i),a+="[data-loaded='true']";var f=yield P(r,a);if(!f.contentDocument)throw new S("Unable to access content document of iframe");return f.contentDocument},function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){J(i,n,o,a,u,"next",t)}function u(t){J(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t,r){return e.apply(this,arguments)}}();function V(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function Q(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){V(i,n,o,a,u,"next",t)}function u(t){V(i,n,o,a,u,"throw",t)}a(void 0)}))}}var X="invisible_layovers",Y=".".concat(X),tt=function(){var t=Q((function*(t){var e=yield rt(t),r=yield Z(t,e,15e3,"",[X]);return yield j(15e3,"[class*='DetailsPanel_loading']",r),r}));return function(e){return t.apply(this,arguments)}}(),et=function(){var t=Q((function*(t){var e,r=t.querySelector(Y);r&&(null===(e=r.parentElement)||void 0===e||e.removeChild(r),yield j(1e4,Y))}));return function(e){return t.apply(this,arguments)}}(),rt=function(){var t=Q((function*(t){var e=t.closest("a[class*='FlightsTicket_link']");if(!e)throw new E("Unable to find layovers link");return e.href}));return function(e){return t.apply(this,arguments)}}();function nt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(t,e)||ot(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(t,e){if(t){if("string"==typeof t)return it(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?it(t,e):void 0}}function it(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var at=function(t){var e;null===(e=t.querySelector("button"))||void 0===e||e.click(),P(500,"[class*='LegSegmentSummary_container']",t);var r,n=[],o={},i=function(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=ot(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(t.querySelectorAll("[class*='AirlineLogoTitle_container'],[class*='LegSegmentDetails_container']"));try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.className.startsWith("Airline")){var u=ut(a).operatingAirline;o.operatingAirline=u}else{if(!a.className.startsWith("LegSeg"))throw new S("Unexpected case: ".concat(a.className));var c=ct(a),l=c.arrivalTime,f=c.departureTime,s=c.duration,d=lt(a),p=d.arrivalAirport,y=d.departureAirport;o.duration=s,o.from=y,o.to=p,o.fromTime=f,o.toTime=l,n.push(o),o={}}}}catch(t){i.e(t)}finally{i.f()}return n},ut=function(t){var e,r,n=nt(t.querySelectorAll("span"),2),o=n[0],i=n[1];if(!o)throw new E("Unable to find marketing airline container");var a=null===(e=o.textContent)||void 0===e?void 0:e.trim(),u=i&&null!==(r=i.textContent)&&void 0!==r&&r.toLowerCase().includes("operated")?i.textContent.split("|")[1].trim():a;if(!a)throw new C("Unable to determine marketing airline");if(!u)throw new C("Unable to determine operating airline");return{marketingAirline:a,operatingAirline:u}},ct=function(t){var e=t.querySelector("[class*='Times_segment']");if(!e)throw new E("Unable to determine times of layover");var r=nt(e.children,3),n=r[0],o=r[1],i=r[2],a=n.textContent;if(!n)throw new C("Couldn't parse departure time of layover");var u=o.textContent;if(!u)throw new C("Couldn't parse duration of layover");var c=i.textContent;if(!c)throw new C("Couldn't parse arrival time of layover");return{departureTime:I(a),arrivalTime:I(c),duration:u}},lt=function(t){var e,r,n=t.querySelector("[class*='Routes_route']");if(!n)throw new E("Unable to determine airports of layover");var o=nt(n.querySelectorAll("span"),2),i=o[0],a=o[1],u=null===(e=i.textContent)||void 0===e?void 0:e.split(/\s+/)[0].trim();if(!u)throw new C("Couldn't parse departure airport of layover");var c=null===(r=a.textContent)||void 0===r?void 0:r.split(/\s+/)[0].trim();if(!c)throw new C("Couldn't parse arrival airport of layover");return{arrivalAirport:c,departureAirport:u}};function ft(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return st(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return st(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function dt(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function pt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){dt(i,n,o,a,u,"next",t)}function u(t){dt(i,n,o,a,u,"throw",t)}a(void 0)}))}}var yt=function(){var t=pt((function*(t){var e=ft((yield vt(t)).querySelectorAll("[class*='Itinerary_leg']"),2),r=e[0],n=e[1],o=at(r),i=at(n);return yield ht(t),{departureLayovers:o,returnLayovers:i}}));return function(e){return t.apply(this,arguments)}}(),vt=function(){var t=pt((function*(t){return yield tt(t)}));return function(e){return t.apply(this,arguments)}}(),ht=function(){var t=pt((function*(t){yield et(t)}));return function(e){return t.apply(this,arguments)}}();function mt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function bt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(r),!0).forEach((function(e){wt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function wt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function At(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}var gt=/\d{1,2} stop/,Ft=function(){var t,e=(t=function*(t){var e=Dt(t),r=Ct(t)?{departureLayovers:[],returnLayovers:[]}:yield yt(t),n=r.departureLayovers,o=r.returnLayovers,i=Et(t,"DEPARTURE"),a=Et(t,"ARRIVAL");return St(t),{departureFlight:bt(bt({},i),{},{layovers:n}),returnFlight:bt(bt({},a),{},{layovers:o}),fare:e}},function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){At(i,n,o,a,u,"next",t)}function u(t){At(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}(),St=function(t){t.dataset.visited="true"},Dt=function(t){var e=t.querySelector("[class*='TotalPrice_totalPriceContainer'],[class*='Price_mainPriceContainer'],[class*='CardPrice_totalPrice']");if(!e)throw new E("Unable to find fare in card");return e.textContent},Ct=function(t){return!gt.test(t.textContent||"")},Et=function(t,e){var r="DEPARTURE"===e?0:1,n=t.querySelectorAll("[class*='UpperTicketBody_leg__']")[r];if(!n)throw new E("Unable to locate ".concat(e," container"));return{marketingAirline:xt(n),operatingAirline:Ot(n),fromTime:jt(n,"DEPARTURE"),toTime:jt(n,"ARRIVAL"),duration:Pt(n)}},xt=function(t){var e,r=t.querySelector("[class*='LogoImage_container__']");if(!r)throw new E("Unable to locate marketing airline container");var n=null===(e=r.textContent)||void 0===e?void 0:e.trim();if(!n){var o=r.querySelector("img");if(o.alt&&(n=o.alt),!n)throw new C("Unable to extract marketing airline name")}return G.getAirlineName(n)},Ot=function(t){var e,r=t.querySelector("[class*='Operators_operator']");if(!r){var n;if(null!==(n=t.textContent)&&void 0!==n&&n.toLowerCase().includes("operated by"))throw new E("Unable to locate operating airline container");return null}var o=null===(e=r.textContent)||void 0===e?void 0:e.trim();if(!o)throw new C("Unable to extract operating airline name");return G.getAirlineName(o)},jt=function(t,e){var r,n="DEPARTURE"===e?0:1,o=t.querySelectorAll("span[class*='LegInfo_routePartialTime__']")[n];if(!o)throw new E("Unable to find ".concat(e," time container"));var i=null===(r=o.textContent)||void 0===r?void 0:r.trim();if(!i)throw new E("Unable to determine ".concat(e," time"));return I(i)},Pt=function(t){var e,r=t.querySelector("span[class*='Duration_duration']");if(!r)throw new E("Unable to find duration time container");var n=null===(e=r.textContent)||void 0===e?void 0:e.trim();if(!n)throw new E("Unable to determine duration time");return n};function Tt(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return _t(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _t(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function _t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function It(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}var Bt="span[class*=SummaryInfo_itineraryCountContainer]",Rt="[class*='FlightsTicket_container'] [role='button']:not([data-visited='true'])",Ut=function(){var t,e=(t=function*(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e4;if(yield P(t,"body"),Lt()&&_(),yield P(t,Bt),kt())return[];var e,r=[],n=document.querySelectorAll(Rt),o=Tt(n);try{for(o.s();!(e=o.n()).done;){var i=e.value;if(!qt(i)){var a=yield Ft(i);Mt(i,a),r.push(a)}}}catch(t){o.e(t)}finally{o.f()}return r},function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){It(i,n,o,a,u,"next",t)}function u(t){It(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}(),Lt=function(){return!!document.querySelector("#px-captcha")},kt=function(){return!!document.querySelector("div[class*=FallbackNoResults_container]")},qt=function(t){return["sponsored"].some((function(e){var r;return null===(r=t.textContent)||void 0===r?void 0:r.includes(e)}))},Mt=function(t,e){var r=Nt(e.departureFlight),n=Nt(e.returnFlight);t.dataset.fpid="".concat(r,"-").concat(n)},Nt=function(t){return[t.fromTime,t.toTime,t.marketingAirline].join("-")};function Ht(){var t=document.querySelector("button[class*='close-button']");t&&t.click()}function Wt(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function $t(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Wt(i,n,o,a,u,"next",t)}function u(t){Wt(i,n,o,a,u,"throw",t)}a(void 0)}))}}var Gt="[class*='FlightsTicket_container'] [role='button']:not([data-visited='true'])",Kt=function(){var t=$t((function*(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7500;yield zt(t),window.scrollTo(window.scrollX,document.body.offsetHeight),yield P(t,Gt)}));return function(){return t.apply(this,arguments)}}(),zt=function(){var t=$t((function*(t){var e=Jt();e&&(e.classList.add("fp-showMoreResults"),e.click(),yield j(t,".fp-showMoreResults"))}));return function(e){return t.apply(this,arguments)}}(),Jt=function(){return Array.from(document.querySelectorAll("button")).find((function(t){return"Show more results"===t.textContent}))};function Zt(t){return function(t){if(Array.isArray(t))return Vt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Vt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Qt(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}var Xt="[data-selected='true']",Yt=function(){var t,e=(t=function*(t,e){te();var r,n=ee(t,e);(r=n).style.border="10px solid #f2554b",r.style.borderRadius="6px",r.style.paddingTop="25px",r.style.paddingBottom="25px",r.dataset.selected="true",re(n)},function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Qt(i,n,o,a,u,"next",t)}function u(t){Qt(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t,r){return e.apply(this,arguments)}}(),te=function(){var t,e=document.querySelector(Xt);e&&((t=e).dataset.selected="false",t.style.border="",t.style.paddingTop="0px",t.style.paddingBottom="0px",t.style.borderRadius="0px")},ee=function(t,e){var r=document.querySelectorAll("[class*='FlightsTicket_container'] [role='button']");if(!r)throw new S("Unable to find flights in highlighting");var n,o,i="".concat(t,"-").concat(e),a=(n=Zt(r),o=i,n.find((function(t){return t.dataset.fpid===o})));if(!a)throw new E("Unable to find flight to highlight");return a},re=function(t){var e=window.pageYOffset+t.getBoundingClientRect().top-window.innerHeight/2;window.scroll({top:e,behavior:"smooth"})};function ne(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function oe(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ne(i,n,o,a,u,"next",t)}function u(t){ne(i,n,o,a,u,"throw",t)}a(void 0)}))}}window.Sentry.init({dsn:"https://d7f3363dd3774a64ad700b4523bcb789@o407795.ingest.sentry.io/5277451"});var ie=!0;chrome.runtime.onMessage.addListener(function(){var e=oe((function*(e){switch(e.event){case"BEGIN_PARSING":yield ae();break;case"HIGHLIGHT_FLIGHT":ie=!1,Ht(),yield Yt(e.selectedDepartureId,e.selectedReturnId),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#back-to-search";if(!document.querySelector(e)){var r=document.createElement("button");r.id="back-to-search",r.textContent="Return to FlightPenguin",r.title="Click to return to FlightPenguin and keep browsing.",r.addEventListener("click",t),document.body.append(r)}}()}}));return function(t){return e.apply(this,arguments)}}());var ae=function(){var t=oe((function*(){var t,r,n=0,o=!0;try{for(;n<60&&o&&ie;){Ht();var i=yield Ut();i?(t="skyscanner",r=i,chrome.runtime.sendMessage({event:"FLIGHT_RESULTS_RECEIVED",flights:r,provider:t}),n+=i.length,yield Kt()):0===n?(e("skyscanner","BOTH"),o=!1):o=!1}!function(t,e){chrome.runtime.sendMessage({event:"SUCCESSFUL_SCRAPER",searchType:e,providerName:t})}("skyscanner","BOTH")}catch(t){window.Sentry.captureException(t),n||function(t,e,r){chrome.runtime.sendMessage({event:"FAILED_SCRAPER",searchType:r,providerName:t,description:"".concat(e.name," ").concat(e.message)})}("skyscanner",t,"BOTH")}}));return function(){return t.apply(this,arguments)}}()})()})();