(()=>{var e,t,n,a,r;Sentry.init({dsn:"https://d7f3363dd3774a64ad700b4523bcb789@o407795.ingest.sentry.io/5277451"}),e=window,t=document,n="script",e.GoogleAnalyticsObject="ga",e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,a=t.createElement(n),r=t.getElementsByTagName(n)[0],a.async=1,a.src="https://www.google-analytics.com/analytics.js",r.parentNode.insertBefore(a,r),ga("create","UA-164337457-1","auto"),ga("set","checkProtocolTask",(function(){})),ga("set","transport","beacon"),ga("require","displayfeatures"),ga("send","pageview","/popup.html");const o=new Date,c=[o.getFullYear(),`${o.getMonth()+1}`.padStart(2,"0"),`${o.getDate()}`.padStart(2,"0")].join("-"),d=document.querySelector("#fromDateInput"),s=document.querySelector("#toDateInput");d.min=c,d.value=c,s.min=c;const i=document.querySelector("#roundtrip");function l(){document.getElementById("search-button").disabled=!1,document.querySelectorAll("fieldset").forEach((e=>e.disabled=!1)),document.getElementById("ellipsis").style.display="none",document.getElementById("search-button-text").textContent="Search"}i.checked="true",s.required=!0,i.addEventListener("change",(e=>{const t=document.getElementById("toDate");e.target.checked?(t.style.display=null,s.required=!0):(t.style.display="none",s.required=!1)})),document.querySelectorAll("input[type=text]").forEach((e=>{e.addEventListener("input",(e=>{"Exa"===e.target.value&&(e.target.value=e.target.list.textContent.trim())}))})),document.querySelectorAll("input[type='radio']").forEach((e=>{e.addEventListener("change",(e=>{"points"===e.target.value?document.getElementById("chase").classList.remove("hide"):document.getElementById("chase").classList.add("hide")}))})),d.addEventListener("change",(e=>{document.querySelector("#toDateInput").min=e.target.value})),document.querySelector("form#search").addEventListener("submit",(e=>{e.preventDefault();const t={from:e.target.from.value,to:e.target.to.value,southwest:!!e.target.price.checked,skyscanner:!!e.target.price.checked,cabin:e.target.cabin.value,fromDate:e.target.fromDate.value,toDate:e.target.toDate?e.target.toDate.value:"",numPax:Number(e.target.numPax.value),roundtrip:e.target.roundtrip.checked,searchByPoints:e.target.points.checked,searchByPrice:e.target.price.checked,pointsValue:e.target.points.checked?e.target.chase.value:null};for(const[e,n]of Object.entries(t))ga("send",{hitType:"event",eventCategory:"search form",eventAction:e,eventLabel:n});document.getElementById("search-button").disabled=!0,document.querySelectorAll("fieldset").forEach((e=>e.disabled=!0)),document.getElementById("ellipsis").style.display="flex",document.getElementById("search-button-text").textContent="Searching",document.querySelector(".validation-error").textContent="";const n={height:window.outerHeight,width:window.outerWidth,left:window.screenX,top:window.screenY};chrome.runtime.sendMessage({event:"FORM_DATA_RECEIVED",formData:t,windowConfig:n})})),chrome.runtime.onMessage.addListener((function(e){switch(console.log(e.event,e),e.event){case"NO_FLIGHTS_FOUND_CLIENT":l(),document.querySelector(".validation-error").textContent="Sorry, no results were found for those dates and locations.";break;case"FAILED_SCRAPER_CLIENT":l(),document.querySelector(".validation-error").textContent="Sorry, something happened, please try searching again.",ga("send",{hitType:"event",eventCategory:"failed scraper",eventAction:e.source,eventLabel:e.description})}}))})();