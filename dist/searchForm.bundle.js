(()=>{function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Sentry.init({dsn:"https://d7f3363dd3774a64ad700b4523bcb789@o407795.ingest.sentry.io/5277451"});var n,r,a,o,c,i;n=window,r=document,a="script",o="ga",n.GoogleAnalyticsObject=o,n.ga=n.ga||function(){(n.ga.q=n.ga.q||[]).push(arguments)},n.ga.l=1*new Date,c=r.createElement(a),i=r.getElementsByTagName(a)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i),ga("create","UA-164337457-1","auto"),ga("set","checkProtocolTask",(function(){})),ga("set","transport","beacon"),ga("require","displayfeatures"),ga("send","pageview","/popup.html");var u=new Date,l=[u.getFullYear(),"".concat(u.getMonth()+1).padStart(2,"0"),"".concat(u.getDate()).padStart(2,"0")].join("-"),d=document.querySelector("#fromDateInput"),s=document.querySelector("#toDateInput");d.min=l,d.value=l,s.min=l;var g=document.querySelector("#roundtrip");function m(){document.getElementById("search-button").disabled=!1,document.querySelectorAll("fieldset").forEach((function(e){return e.disabled=!1})),document.getElementById("ellipsis").style.display="none",document.getElementById("search-button-text").textContent="Search"}g.checked="true",s.required=!0,g.addEventListener("change",(function(e){var t=document.getElementById("toDate");e.target.checked?(t.style.display=null,s.required=!0):(t.style.display="none",s.required=!1)})),document.querySelectorAll("input[type=text]").forEach((function(e){e.addEventListener("input",(function(e){"Exa"===e.target.value&&(e.target.value=e.target.list.textContent.trim())}))})),document.querySelectorAll("input[type='radio']").forEach((function(e){e.addEventListener("change",(function(e){"points"===e.target.value?document.getElementById("chase").classList.remove("hide"):document.getElementById("chase").classList.add("hide")}))})),d.addEventListener("change",(function(e){document.querySelector("#toDateInput").min=e.target.value})),document.querySelector("form#search").addEventListener("submit",(function(t){t.preventDefault();for(var n={from:t.target.from.value,to:t.target.to.value,cabin:t.target.cabin.value,fromDate:t.target.fromDate.value,toDate:t.target.toDate?t.target.toDate.value:"",numPax:Number(t.target.numPax.value),roundtrip:t.target.roundtrip.checked,searchByPoints:t.target.points.checked,searchByPrice:t.target.price.checked,pointsValue:t.target.points.checked?t.target.chase.value:null},r=0,a=Object.entries(n);r<a.length;r++){var o=e(a[r],2),c=o[0],i=o[1];ga("send",{hitType:"event",eventCategory:"search form",eventAction:c,eventLabel:i})}document.getElementById("search-button").disabled=!0,document.querySelectorAll("fieldset").forEach((function(e){return e.disabled=!0})),document.getElementById("ellipsis").style.display="flex",document.getElementById("search-button-text").textContent="Searching",document.querySelector(".validation-error").textContent="";var u={height:window.outerHeight,width:window.outerWidth,left:window.screenX,top:window.screenY};chrome.runtime.sendMessage({event:"FORM_DATA_RECEIVED",formData:n,windowConfig:u})})),chrome.runtime.onMessage.addListener((function(e){switch(e.event){case"NO_FLIGHTS_FOUND_CLIENT":m(),document.querySelector(".validation-error").textContent="Sorry, no results were found for those dates and locations.";break;case"FAILED_SCRAPER_CLIENT":m(),document.querySelector(".validation-error").textContent="Sorry, something happened, please try searching again.",ga("send",{hitType:"event",eventCategory:"failed scraper",eventAction:e.source,eventLabel:e.description})}}))})();