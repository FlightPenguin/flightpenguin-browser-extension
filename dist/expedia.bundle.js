(()=>{var t={1633:(t,e,r)=>{var n="[object Symbol]",o="\\u0300-\\u036f\\ufe20-\\ufe23",i="[\\ud800-\\udfff]",u="["+o+"\\u20d0-\\u20f0]",a="\\ud83c[\\udffb-\\udfff]",l="[^\\ud800-\\udfff]",c="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+u+"|"+a+")"+"?",d="[\\ufe0e\\ufe0f]?",p=d+s+("(?:\\u200d(?:"+[l,c,f].join("|")+")"+d+s+")*"),y="(?:"+[l+u+"?",u,c,f,i].join("|")+")",v=RegExp(a+"(?="+a+")|"+y+p,"g"),h=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),m="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,b="object"==typeof self&&self&&self.Object===Object&&self,g=m||b||Function("return this")();function A(t){return h.test(t)}function w(t){return A(t)?function(t){return t.match(v)||[]}(t):function(t){return t.split("")}(t)}var F=Object.prototype.toString,S=g.Symbol,D=S?S.prototype:void 0,C=D?D.toString:void 0;function x(t){if("string"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&F.call(t)==n}(t))return C?C.call(t):"";var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}function E(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:function(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i}(t,e,r)}function T(t){return null==t?"":x(t)}var O,j=(O="toUpperCase",function(t){var e=A(t=T(t))?w(t):void 0,r=e?e[0]:t.charAt(0),n=e?E(e,1).join(""):t.slice(1);return r[O]()+n});t.exports=function(t){return j(T(t).toLowerCase())}}},e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";function t(){chrome.runtime.sendMessage({event:"FOCUS_WEBPAGE"})}function e(t,e){chrome.runtime.sendMessage({event:"SUCCESSFUL_SCRAPER",searchType:e,providerName:t})}function n(t,e){chrome.runtime.sendMessage({event:"NO_FLIGHTS_FOUND",provider:t,searchType:e})}function o(t,e,r){chrome.runtime.sendMessage({event:"FAILED_SCRAPER",searchType:r,providerName:t,description:"".concat(e.name," ").concat(e.message)})}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],u=!0,a=!1;try{for(r=r.call(t);!(u=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);u=!0);}catch(t){a=!0,o=t}finally{try{u||null==r.return||r.return()}finally{if(a)throw o}}return i}}(t,e)||u(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){if(t){if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var l=/\.(?:(?:[\x2D0-9A-Z_a-z\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])|\\(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))+/,c=/#(?:(?:[\x2D0-9A-Z_a-z\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])|\\(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))+/,f=/\[[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*((?:(?:\*|[\x2D0-9A-Z_a-z]*)\|)?(?:(?:[\x2D0-9A-Z_a-z\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+))/g,s={};function d(t){var e=s[t];if(e)return e;e=s[t]={attributes:!0,subtree:!0,childList:!0};var r,n=[],o=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=u(t))){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){l=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}(t.matchAll(f));try{for(o.s();!(r=o.n()).done;){var a=i(r.value,2)[1];if(a.startsWith("*")||a.startsWith("|"))return e;n.push(a.replace("|",":"))}}catch(t){o.e(t)}finally{o.f()}return l.test(t)&&n.push("class"),c.test(t)&&n.push("id"),0===n.length?e.attributes=!1:e.attributeFilter=n,e}function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.timeout,n=void 0===r?2500:r,o=e.scope,i=void 0===o?document:o;return new Promise((function(e){var r=i.querySelector(t);if(null===r){var o=null,u=new MutationObserver((function(){var r=i.querySelector(t);null!==r&&(clearTimeout(o),u.disconnect(),e(r))}));u.observe(i,d(t)),o=setTimeout((function(){u.disconnect(),e(null)}),n)}else e(r)}))}function y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.timeout,n=void 0===r?2500:r,o=e.scope,i=void 0===o?document:o;return new Promise((function(e){var r=null;if(null!==i.querySelector(t)){var o=new MutationObserver((function(){null===i.querySelector(t)&&(clearTimeout(r),o.disconnect(),e(!0))}));o.observe(i,d(t)),r=setTimeout((function(){o.disconnect(),e(!1)}),n)}else e(!0)}))}function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}function b(t){var e=F();return function(){var r,n=D(t);if(e){var o=D(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return g(this,r)}}function g(t,e){return!e||"object"!==v(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function A(t){var e="function"==typeof Map?new Map:void 0;return(A=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return w(t,arguments,D(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),S(n,t)})(t)}function w(t,e,r){return(w=F()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&S(o,r.prototype),o}).apply(null,arguments)}function F(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var C=function(t){m(r,t);var e=b(r);function r(t){return h(this,r),e.call(this,t)}return r}(function(t){m(r,t);var e=b(r);function r(t){var n;return h(this,r),(n=e.call(this)).message=t,n.stack=(new Error).stack,n.name=n.constructor.name,n}return r}(A(Error))),x=function(t){m(r,t);var e=b(r);function r(t){return h(this,r),e.call(this,t)}return r}(C),E=function(t){m(r,t);var e=b(r);function r(t){return h(this,r),e.call(this,t)}return r}(C),T=function(t){m(r,t);var e=b(r);function r(t){return h(this,r),e.call(this,t)}return r}(C);function O(t,e,r,n,o,i,u){try{var a=t[i](u),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(n,o)}function j(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function u(t){O(i,n,o,u,a,"next",t)}function a(t){O(i,n,o,u,a,"throw",t)}u(void 0)}))}}var I=function(){var t=j((function*(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.document;if(r.querySelector(e)){var n=yield y(e,{timeout:t,scope:r});if(!n)throw new x("Took longer than ".concat(t," ms to make the loading indicator (").concat(e,") disappear"))}}));return function(e,r){return t.apply(this,arguments)}}(),k=function(){var t=j((function*(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.document,n=r.querySelector(e);if(!n&&!(n=yield p(e,{timeout:t,scope:r})))throw new x("Render of ".concat(e," failed to complete in ").concat(t));return n}));return function(){return t.apply(this,arguments)}}(),P="button[data-icon='tool-close']",R=function(){var t=document.querySelector(P);if(!t)throw new T("Unable to find modal close element via ".concat(P));t.click()},U=function(t){return t.toLowerCase().replace(" ","").trim()},B=r(1633),N=r.n(B);function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(t,e){L=function(t,e){return new i(t,void 0,e)};var r=q(RegExp),n=RegExp.prototype,o=new WeakMap;function i(t,e,n){var i=r.call(this,t,e);return o.set(i,n||o.get(t)),i}function u(t,e){var r=o.get(e);return Object.keys(r).reduce((function(e,n){return e[n]=t[r[n]],e}),Object.create(null))}return M(i,r),i.prototype.exec=function(t){var e=n.exec.call(this,t);return e&&(e.groups=u(e,this)),e},i.prototype[Symbol.replace]=function(t,e){if("string"==typeof e){var r=o.get(this);return n[Symbol.replace].call(this,t,e.replace(/\$<([^>]+)>/g,(function(t,e){return"$"+r[e]})))}if("function"==typeof e){var i=this;return n[Symbol.replace].call(this,t,(function(){var t=[];return t.push.apply(t,arguments),"object"!==_(t[t.length-1])&&t.push(u(t,i)),e.apply(this,t)}))}return n[Symbol.replace].call(this,t,e)},L.apply(this,arguments)}function M(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$(t,e)}function q(t){var e="function"==typeof Map?new Map:void 0;return(q=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return H(t,arguments,z(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),$(n,t)})(t)}function H(t,e,r){return(H=G()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&$(o,r.prototype),o}).apply(null,arguments)}function G(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function $(t,e){return($=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function z(t){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var W=function(t){var e=L(/^([\t-\r 0-9A-Z_a-z\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+as[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+(alaska)([a-z]{1,20})$/i,{airline:1,dbaPart1:2,dbaPart2:3}),r=t;if(e.test(r)){var n=r.match(e);r="".concat(n.groups.airline," as ").concat(n.groups.dbaPart1," ").concat(N()(n.groups.dbaPart2))}return r};const K={airlineDetailsMap:{"American Airlines":{display:"American",color:"#C5423E",code:"AA"},American:{display:"American",color:"#C5423E",code:"AA"},Delta:{display:"Delta",color:"#EE722E",code:"DL"},"Delta Air Lines":{display:"Delta",color:"#EE722E",code:"DL"},"Southwest Airlines":{display:"Southwest",color:"#F6C04D",code:"WN"},Southwest:{display:"Southwest",color:"#F6C04D",code:"WN"},United:{display:"United",color:"#235EA6",code:"UA"},"United Airlines":{display:"United",color:"#235EA6",code:"UA"},"Air Canada":{display:"Air Canada",color:"#E53222",code:"AC"},Alaska:{display:"Alaska",color:"#51172C",code:"AS"},"Alaska Airlines":{display:"Alaska",color:"#51172C",code:"AS"},jetBlue:{display:"jetBlue",color:"#5F90C8",code:"B6"},"JetBlue Airways":{display:"jetBlue",color:"#5F90C8",code:"B6"},Spirit:{display:"Spirit",color:"#BBB140",code:"NK"},"Spirit Airlines":{display:"Spirit",color:"#BBB140",code:"NK"},WestJet:{display:"WestJet",color:"#4BA89C",code:"WS"},Aeromexico:{display:"Aeromexico",color:"#000000",code:"AM"},Frontier:{display:"Frontier",color:"#378055",code:"F9"},"Frontier Airlines":{display:"Frontier",color:"#378055",code:"F9"},Interjet:{display:"Interjet",color:"#A8A8A8",code:"4O"},"Hawaiian Airlines":{display:"Hawaiian",color:"#4D388A",code:"HA"},"Sun Country":{display:"Sun Country",color:"#D79A71",code:"SY"},"Sun Country Airlines":{display:"Sun Country",color:"#D79A71",code:"SY"},"Porter Airlines":{display:"Porter",color:"#0F2B53",code:"PD"},"China Southern Airlines":{display:"China Southern",color:"#93ACCA",code:"CZ"},Lufthansa:{display:"Lufthansa",color:"#EFB95D",code:"LH"},SWISS:{display:"Swiss",color:"#D42D21",code:"LX"},"China Eastern Airlines":{display:"China Eastern",color:"#A9545F",code:"MU"},"British Airways":{display:"British",color:"#EA8E8C",code:"BA"},Iberia:{display:"Iberia",color:"#D05653",code:"IB"},"Air China":{display:"Air China",color:"#DF524B",code:"CA"},"Emirates Airlines":{display:"Emirates",color:"#CF534F",code:"EK"},"KLM-Royal Dutch Airlines":{display:"KLM",color:"#44A0DC",code:"KL"},"Air France":{display:"Air France",color:"#DB3832",code:"AF"},"Turkish Airlines":{display:"Turkish",color:"#DB3832",code:"TK"},"Cathay Pacific":{display:"Cathay",color:"#2A645A",code:"CX"},"Cathay Dragon":{display:"Cathay",color:"#2A645A",code:"CX"},"EVA Airways":{display:"EVA",color:"#6F9F64",code:"BR"},"China Airlines":{display:"China Airlines",color:"#DAABB1",code:"CI"},"ANA Airlines":{display:"ANA",color:"#254897",code:"NH"},"Japan Airlines":{display:"Japan Airlines",color:"#E56E69",code:"JL"},"Air India":{display:"Air India",color:"#D47346",code:"AI"},"Air India Limited":{display:"Air India",color:"#D47346",code:"AI"},"Qantas Airways":{display:"Qantas",color:"#E34538",code:"QF"},"Singapore Airlines":{display:"Singapore",color:"#EFA952",code:"SQ"},"ANA (All Nippon Airways)":{display:"ANA",color:"#0f4a8d"}},getAirlineName:function(t){if(t&&"string"==typeof t){var e=t.trim().replace(/\s+/g," ");e=W(e);var r=this.airlineDetailsMap[e];return r&&(e=r.display),e}},getAirlineDetails:function(t){var e=t.trim().replace(/\s+/g," ");return e=W(e),this.airlineDetailsMap[e]||{display:e,color:"#DFCCFB"}}};function J(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Z(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Z(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function V(t,e){var r=t.toLowerCase(),n=J(r.split(":"),2),o=n[0],i=n[1];o=Number(o);var u=Number(i.replace(/(pm)|(am)|(\+\d)/g,"").trim());if(e){var a=t.match(/(\+\d)/);a&&(o+=24*a[0].split("+")[1])}return r.includes("pm")&&o%12!=0?o+=12:r.includes("am")&&o%12==0&&(o-=12),{hours:o,minutes:u}}function Q(t,e,r){var n=V(t),o=n.hours,i=n.minutes,u=V(e),a=u.hours,l=u.minutes,c=e.match(/(\+\d)/),f=t.match(/(\+\d)/),s=0,d=0;if(f){var p=J(f[0].split("+"),2),y=(p[0],p[1]);d=s+=Number(y)}if(c){var v=J(c[0].split("+"),2),h=(v[0],v[1]);d+=Number(h)}var m=60*(o+24*s)+i,b=60*(a+24*d)+l;return function(t){var e,r;if(t.includes("h")){var n=J(t.split("h"),2);e=n[0],r=n[1]}else e=0,r=t;var o=r.trim().split("m")[0]||0;return Number(o)+60*Number(e)}(r)-(b-m)}function Y(t){var e=V(t,!0),r=e.hours,n=e.minutes,o=t.toLowerCase().match(/(pm)|(am)/)[0],i=t.match(/(\+\d)/);return{hours:r,displayHours:Number(t.split(":")[0]),minutes:n,timeOfDay:o,excessDays:i?i[0]:i}}function X(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var tt=function(){function t(e){var r=e.fromTime,n=e.toTime,o=e.operatingAirline,i=e.marketingAirline,u=e.duration,a=e.layovers;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fromTime=r,this.fromTimeDetails=this.getTimeDetails(r),this.toTime=n,this.toTimeDetails=this.getTimeDetails(n),this.duration=u,this.operatingAirline=K.getAirlineName(o),this.operatingAirlineDetails=o?K.getAirlineDetails(o):null,this.marketingAirline=K.getAirlineName(i),this.marketingAirlineDetails=i?K.getAirlineDetails(i):null,this.layovers=a,this.timezoneOffset=this.getTimezoneOffset(),this.id=this.getFlightPenguinId()}var e,r,n;return e=t,(r=[{key:"getTimeDetails",value:function(t){var e=V(t,!0),r=e.hours,n=e.minutes,o=t.toLowerCase().includes("pm")?"pm":"am",i=t.match(/(\+\d)/);return{hours:r,displayHours:Number(t.split(":")[0]),minutes:n,timeOfDay:o,excessDays:i?i[0]:i}}},{key:"getFlightPenguinId",value:function(){return"".concat(this.operatingAirline,"-").concat(this.fromTime,"-").concat(this.toTime)}},{key:"getTimezoneOffset",value:function(){return Q(this.fromTime,this.toTime,this.duration)}}])&&X(e.prototype,r),n&&X(e,n),t}(),et="[data-test-id='select-link']",rt=function(t){var e=t.querySelector(et);if(!e)throw new T("Unable to find modal open element via ".concat(et));e.click()};function nt(t,e,r,n,o,i,u){try{var a=t[i](u),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(n,o)}var ot="summary",it=function(){var t,e=(t=function*(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,r=yield p(ot,{timeout:e});if(!r)throw new T("Unable to find collapsible open element via ".concat(ot));r.click()},function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function u(t){nt(i,n,o,u,a,"next",t)}function a(t){nt(i,n,o,u,a,"throw",t)}u(void 0)}))});return function(t){return e.apply(this,arguments)}}();function ut(t,e,r,n,o,i,u){try{var a=t[i](u),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(n,o)}var at="[data-test-id='details-and-fares']:not(:empty)",lt=function(){var t,e=(t=function*(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e4,e=yield p(at,{timeout:t});if(!e)throw new T("Unable to locate modal after ".concat(t," ms"));return e},function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function u(t){ut(i,n,o,u,a,"next",t)}function a(t){ut(i,n,o,u,a,"throw",t)}u(void 0)}))});return function(){return e.apply(this,arguments)}}();function ct(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ft=function(){function t(e){var r=e.fromTime,n=e.toTime,o=e.from,i=e.to,u=e.operatingAirline,a=e.duration;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fromTime=r,this.fromTimeDetails=this.getTimeDetails(r),this.toTime=n,this.toTimeDetails=this.getTimeDetails(n),this.from=o,this.to=i,this.operatingAirline=u,this.duration=a,this.operatingAirlineDetails=K.getAirlineDetails(u)}var e,r,n;return e=t,(r=[{key:"getTimeDetails",value:function(t){var e=V(t,!0),r=e.hours,n=e.minutes,o=t.toLowerCase().includes("pm")?"pm":"am",i=t.match(/(\+\d)/);return{hours:r,displayHours:Number(t.split(":")[0]),minutes:n,timeOfDay:o,excessDays:i?i[0]:i}}}])&&ct(e.prototype,r),n&&ct(e,n),t}();function st(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return dt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var pt=function(t,e,r){var n=st(t.children,3),o=n[0],i=n[1],u=n[2],a=vt(o),l=yt(u);return At(a,l)&&(l+="+1"),r&&wt(r,a)&&(a+="+1"),new ft({fromTime:a,toTime:l,from:mt(o),to:ht(u),operatingAirline:gt(null==i?void 0:i.children[1]),duration:bt(null==i?void 0:i.children[0])})},yt=function(t){var e,r=null===(e=t.textContent)||void 0===e?void 0:e.split(" - ")[0].toLowerCase().replace("arrival","");if(!r)throw new E("Unable to determine arrival time for layover");return U(r)},vt=function(t){var e,r=null===(e=t.textContent)||void 0===e?void 0:e.split(" - ")[0].toLowerCase().replace("departure","");if(!r)throw new E("Unable to determine departure time for layover");return U(r)},ht=function(t){var e,r,n,o,i,u=null===(e=t.textContent)||void 0===e?void 0:e.slice((null===(r=t.textContent)||void 0===r?void 0:r.indexOf("("))+1,null===(n=t.textContent)||void 0===n?void 0:n.indexOf(")"));3!==(null===(o=u)||void 0===o?void 0:o.length)&&(u=null===(i=t.textContent)||void 0===i?void 0:i.split("-")[1].split("Arrives")[0].trim());if(!u)throw new E("Unable to determine departure airport for layover");return u},mt=function(t){var e,r,n,o,i,u=null===(e=t.textContent)||void 0===e?void 0:e.slice((null===(r=t.textContent)||void 0===r?void 0:r.indexOf("("))+1,null===(n=t.textContent)||void 0===n?void 0:n.indexOf(")"));3!==(null===(o=u)||void 0===o?void 0:o.length)&&(u=null===(i=t.textContent)||void 0===i?void 0:i.split("-")[1].split("Arrives")[0].trim());if(!u)throw new E("Unable to determine departure airport for layover");return u},bt=function(t){var e,r=null==t||null===(e=t.textContent)||void 0===e?void 0:e.replace("flight","").trim();if(!r)throw new E("Unable to determine duration time for layover");return r},gt=function(t){var e,r,n=null==t||null===(e=t.textContent)||void 0===e||null===(r=e.match(/[A-z]*/g))||void 0===r?void 0:r.join(" ").trim();if(!n)throw new E("Unable to determine operating airline for layover");return n},At=function(t,e){var r=Y(t),n=Y(e);return n.hours%24<r.hours%24||n.hours%24==r.hours%24&&n.minutes<=r.minutes},wt=function(t,e){var r=Y(e);return t.toTimeDetails.hours%24>r.hours%24};function Ft(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(t,e)||Dt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=Dt(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw i}}}}function Dt(t,e){if(t){if("string"==typeof t)return Ct(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ct(t,e):void 0}}function Ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function xt(t,e,r,n,o,i,u){try{var a=t[i](u),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(n,o)}var Et="[data-test-id^='journey-section']",Tt=function(){var t,e=(t=function*(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,r=yield p(Et,{timeout:e});if(!r)throw new T("Could not find ".concat(Et," in modal after ").concat(e," ms"));var n=t.querySelectorAll(Et);if(!n)throw new T("Could not find legs in modal");var o,i=[],u=St(n.entries());try{for(u.s();!(o=u.n()).done;){var a=Ft(o.value,2),l=(a[0],a[1]),c=pt(l,0,i[i.length-1]);i.push(c)}}catch(t){u.e(t)}finally{u.f()}if(!i)throw new C("Unable to identify layovers");return i},function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function u(t){xt(i,n,o,u,a,"next",t)}function a(t){xt(i,n,o,u,a,"throw",t)}u(void 0)}))});return function(t){return e.apply(this,arguments)}}();function Ot(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return jt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function It(t,e,r,n,o,i,u){try{var a=t[i](u),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(n,o)}var kt=function(){var t,e=(t=function*(t){var e=Pt(t),r=e.marketingAirline,n=e.operatingAirline,o=Rt(t),i=o.departureTime,u=o.arrivalTime,a=Ut(t),l=a.duration,c=a.hasStops;rt(t);var f=yield lt();yield it(f);var s=c?yield Tt(f):[];return new tt({marketingAirline:r,operatingAirline:n,fromTime:i,toTime:u,duration:l,layovers:s})},function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function u(t){It(i,n,o,u,a,"next",t)}function a(t){It(i,n,o,u,a,"throw",t)}u(void 0)}))});return function(t){return e.apply(this,arguments)}}(),Pt=function(t){var e,r,n,o=t.querySelector("[data-test-id='flight-operated']");if(!o)throw new T("Unable to lookup marketing airline");return o.childNodes.length>1?(r=o.childNodes[0],n=o.childNodes[1]):(r=o,n=null),{marketingAirline:K.getAirlineName(r.textContent),operatingAirline:n?null===(e=n.textContent)||void 0===e?void 0:e.split(/\s+operated\s+by\s+/)[1]:null}},Rt=function(t){var e,r=t.querySelector("[data-test-id='arrival-time']");if(!r)throw new T("Unable to lookup flight arrival time");var n=Ot((null===(e=r.textContent)||void 0===e?void 0:e.split(" - "))||[null,null],2),o=n[0],i=n[1];if(!o)throw new E("Unable to determine departure time for flight");if(!i)throw new E("Unable to determine arrival time for flight");return{arrivalTime:U(i),departureTime:U(o)}},Ut=function(t){var e,r,n=t.querySelector("[data-test-id='journey-duration']");if(!n)throw new T("Unable to lookup flight duration time");var o=null===(e=n.textContent)||void 0===e?void 0:e.split("(")[0].trim(),i=!(null!==(r=n.textContent)&&void 0!==r&&r.includes("Nonstop"));if(!o)throw new E("Unable to determine duration time for flight");return{duration:o,hasStops:i}};function Bt(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Nt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nt(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw i}}}}function Nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _t(t,e,r,n,o,i,u){try{var a=t[i](u),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(n,o)}function Lt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function u(t){_t(i,n,o,u,a,"next",t)}function a(t){_t(i,n,o,u,a,"throw",t)}u(void 0)}))}}var Mt="[data-test-id='search-results']",qt=".uitk-loading-bar-current",Ht=".uitk-progress-indicator-step-details-wrapper > a",Gt="[data-test-id='loading-animation']",$t="[data-test-id='loading-more-flights']",zt="[name='showMoreButton']",Wt="[data-test-id='offer-listing']",Kt=function(){var t=Lt((function*(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4;if(yield k(3e4,Mt),t&&(yield k(3e4,Ht)),yield I(e,qt),yield I(e,Gt),yield I(e,$t),Jt())return[];yield Zt();var r,n=[],o=document.querySelectorAll(Wt),i=Bt(o);try{for(i.s();!(r=i.n()).done;){var u=r.value;if(!Yt(u)){var a=yield kt(u),l=null,c=null,f=null;t?(l=t,c=a,f=yield Qt(u)):(l=a,f=yield Vt()),u.dataset.fpid=Xt(a),n.push({departureFlight:l,returnFlight:c,fare:f}),R()}}}catch(t){i.e(t)}finally{i.f()}return n}));return function(){return t.apply(this,arguments)}}(),Jt=function(){return!!document.querySelector(".uitk-empty-state")},Zt=function(){var t=Lt((function*(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e4,e=document.querySelector(zt);if(e){e.click();var r=yield y(zt,{timeout:t});if(!r)throw new x("Took longer than ${loadingTimeout} ms to load the show more flight results")}}));return function(){return t.apply(this,arguments)}}(),Vt=function(){var t=Lt((function*(){var t=(yield lt()).querySelector("[data-test-id='fare-types-carousel'] .uitk-lockup-price");if(!t)throw new T("Unable to find fare in modal");return t.textContent}));return function(){return t.apply(this,arguments)}}(),Qt=function(){var t=Lt((function*(t){var e=t.querySelector(".uitk-price-subtext");if(!e)throw new T("Unable to find fare in card");return e.textContent}));return function(e){return t.apply(this,arguments)}}(),Yt=function(t){return["bargain fare","special fare","after booking"].some((function(e){var r;return null===(r=t.textContent)||void 0===r?void 0:r.includes(e)}))},Xt=function(t){return[t.fromTime,t.toTime,t.marketingAirline].join("-")};function te(t){return function(t){if(Array.isArray(t))return ee(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ee(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ee(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function re(t,e,r,n,o,i,u){try{var a=t[i](u),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(n,o)}var ne=function(){var t,e=(t=function*(t,e){oe();var r,n=ie(e||t);(r=n).style.border="10px solid #f2554b",r.style.borderRadius="6px",r.style.paddingTop="25px",r.style.paddingBottom="25px",r.dataset.selected="true",ue(n)},function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function u(t){re(i,n,o,u,a,"next",t)}function a(t){re(i,n,o,u,a,"throw",t)}u(void 0)}))});return function(t,r){return e.apply(this,arguments)}}(),oe=function(){var t,e=document.querySelector("[data-selected='true']");e&&((t=e).dataset.selected="false",t.style.border="",t.style.paddingTop="0px",t.style.paddingBottom="0px",t.style.borderRadius="0px")},ie=function(t){var e=document.querySelectorAll("[data-test-id='offer-listing']");if(!e)throw new C("Unable to find flights in highlighting");var r,n,o=(r=te(e),n=t,r.find((function(t){return t.dataset.fpid===n})));if(!o)throw new T("Unable to find flight to highlight");return o},ue=function(t){var e=window.pageYOffset+t.getBoundingClientRect().top-window.innerHeight/2;window.scrollTo({top:e,behavior:"smooth"})};function ae(t,e,r,n,o,i,u){try{var a=t[i](u),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(n,o)}var le=function(){var t,e=(t=function*(t){var e=document.querySelector("[data-fpid='".concat(t.id,"']"));if(!(e||(yield Kt(),e=document.querySelector("[data-fpid='".concat(t.id,"']")))))throw new T("Unable to lookup departure flight");rt(e);var r=yield lt();ce(r)},function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function u(t){ae(i,n,o,u,a,"next",t)}function a(t){ae(i,n,o,u,a,"throw",t)}u(void 0)}))});return function(t){return e.apply(this,arguments)}}(),ce=function(t){var e=t.querySelector("[data-test-id='select-button']");if(!e)throw new T("Unable to find select button");e.click()};function fe(t,e,r,n,o,i,u){try{var a=t[i](u),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(n,o)}function se(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function u(t){fe(i,n,o,u,a,"next",t)}function a(t){fe(i,n,o,u,a,"throw",t)}u(void 0)}))}}window.Sentry.init({dsn:"https://d7f3363dd3774a64ad700b4523bcb789@o407795.ingest.sentry.io/5277451"}),chrome.runtime.onMessage.addListener(function(){var e=se((function*(e){switch(e.event){case"BEGIN_PARSING":yield de();break;case"GET_RETURN_FLIGHTS":yield pe(e.departure);break;case"HIGHLIGHT_FLIGHT":yield ne(e.selectedDepartureId,e.selectedReturnId),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#back-to-search";if(!document.querySelector(e)){var r=document.createElement("button");r.id="back-to-search",r.textContent="Return to FlightPenguin",r.title="Click to return to FlightPenguin and keep browsing.",r.addEventListener("click",t),document.body.append(r)}}();break;case"CLEAR_SELECTION":history.back(),chrome.runtime.sendMessage({event:"PROVIDER_READY",provider:"expedia"})}}));return function(t){return e.apply(this,arguments)}}());var de=function(){var t=se((function*(){try{var t=yield Kt(null);t?(!function(t,e){chrome.runtime.sendMessage({event:"FLIGHT_RESULTS_RECEIVED",flights:e,provider:t})}("expedia",t),e("expedia","DEPARTURE")):n("expedia","DEPARTURE")}catch(t){window.Sentry.captureException(t),o("expedia",t,"DEPARTURE")}}));return function(){return t.apply(this,arguments)}}(),pe=function(){var t=se((function*(t){yield le(t);try{var r=yield Kt(t);r?(!function(t,e){chrome.runtime.sendMessage({event:"RETURN_FLIGHTS_RECEIVED",flights:e,provider:t})}("expedia",r),e("expedia","RETURN")):n("expedia","RETURN")}catch(t){window.Sentry.captureException(t),o("expedia",t,"RETURN")}}));return function(e){return t.apply(this,arguments)}}()})()})();